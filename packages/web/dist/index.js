var e=function(){return e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},e.apply(this,arguments)};function t(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function n(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}var o="3.3.6";function i(e,t){return new Promise((function(n){return setTimeout(n,e,t)}))}function a(e,t){try{var n=e();(r=n)&&"function"==typeof r.then?n.then((function(e){return t(!0,e)}),(function(e){return t(!1,e)})):t(!0,n)}catch(e){t(!1,e)}var r}function s(e,r,o){return void 0===o&&(o=16),t(this,void 0,void 0,(function(){var t,a,s;return n(this,(function(n){switch(n.label){case 0:t=Date.now(),a=0,n.label=1;case 1:return a<e.length?(r(e[a],a),(s=Date.now())>=t+o?(t=s,[4,i(0)]):[3,3]):[3,4];case 2:n.sent(),n.label=3;case 3:return++a,[3,1];case 4:return[2]}}))}))}function c(e){e.then(void 0,(function(){}))}function l(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]+t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]+t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]+t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]+t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function u(e,t){e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]],t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]];var n=[0,0,0,0];return n[3]+=e[3]*t[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=e[2]*t[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=e[3]*t[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=e[1]*t[3],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[2]*t[2],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=e[3]*t[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=e[0]*t[3]+e[1]*t[2]+e[2]*t[1]+e[3]*t[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]}function d(e,t){return 32===(t%=64)?[e[1],e[0]]:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t|e[0]>>>32-t]:(t-=32,[e[1]<<t|e[0]>>>32-t,e[0]<<t|e[1]>>>32-t])}function h(e,t){return 0===(t%=64)?e:t<32?[e[0]<<t|e[1]>>>32-t,e[1]<<t]:[e[1]<<t-32,0]}function m(e,t){return[e[0]^t[0],e[1]^t[1]]}function p(e){return e=m(e,[0,e[0]>>>1]),e=m(e=u(e,[4283543511,3981806797]),[0,e[0]>>>1]),e=m(e=u(e,[3301882366,444984403]),[0,e[0]>>>1])}function g(e){return parseInt(e)}function f(e){return parseFloat(e)}function v(e,t){return"number"==typeof e&&isNaN(e)?t:e}function y(e){return e.reduce((function(e,t){return e+(t?1:0)}),0)}function I(e,t){if(void 0===t&&(t=1),Math.abs(t)>=1)return Math.round(e/t)*t;var n=1/t;return Math.round(e*n)/n}function C(e){return e&&"object"==typeof e&&"message"in e?e:{message:e}}function b(e){return"function"!=typeof e}function S(e,r,o){var l=Object.keys(e).filter((function(e){return!function(e,t){for(var n=0,r=e.length;n<r;++n)if(e[n]===t)return!0;return!1}(o,e)})),u=Array(l.length);return s(l,(function(t,n){u[n]=function(e,t){var n=new Promise((function(n){var r=Date.now();a(e.bind(null,t),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=Date.now()-r;if(!e[0])return n((function(){return{error:C(e[1]),duration:o}}));var i=e[1];if(b(i))return n((function(){return{value:i,duration:o}}));n((function(){return new Promise((function(e){var t=Date.now();a(i,(function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=o+Date.now()-t;if(!n[0])return e({error:C(n[1]),duration:i});e({value:n[1],duration:i})}))}))}))}))}));return c(n),function(){return n.then((function(e){return e()}))}}(e[t],r)})),function(){return t(this,void 0,void 0,(function(){var e,t,r,o,a,d;return n(this,(function(h){switch(h.label){case 0:for(e={},t=0,r=l;t<r.length;t++)o=r[t],e[o]=void 0;a=Array(l.length),d=function(){var t;return n(this,(function(n){switch(n.label){case 0:return t=!0,[4,s(l,(function(n,r){if(!a[r])if(u[r]){var o=u[r]().then((function(t){return e[n]=t}));c(o),a[r]=o}else t=!1}))];case 1:return n.sent(),t?[2,"break"]:[4,i(1)];case 2:return n.sent(),[2]}}))},h.label=1;case 1:return[5,d()];case 2:if("break"===h.sent())return[3,4];h.label=3;case 3:return[3,1];case 4:return[4,Promise.all(a)];case 5:return h.sent(),[2,e]}}))}))}}function w(){var e=window,t=navigator;return y(["MSCSSMatrix"in e,"msSetImmediate"in e,"msIndexedDB"in e,"msMaxTouchPoints"in t,"msPointerEnabled"in t])>=4}function k(){var e=window,t=navigator;return y(["webkitPersistentStorage"in t,"webkitTemporaryStorage"in t,0===t.vendor.indexOf("Google"),"webkitResolveLocalFileSystemURL"in e,"BatteryManager"in e,"webkitMediaStream"in e,"webkitSpeechGrammar"in e])>=5}function A(){var e=window,t=navigator;return y(["ApplePayError"in e,"CSSPrimitiveValue"in e,"Counter"in e,0===t.vendor.indexOf("Apple"),"getStorageUpdates"in t,"WebKitMediaKeys"in e])>=4}function M(){var e=window;return y(["safari"in e,!("DeviceMotionEvent"in e),!("ongestureend"in e),!("standalone"in navigator)])>=3}function L(){var e=document;return(e.exitFullscreen||e.msExitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen).call(e)}function R(){var e=k(),t=function(){var e,t,n=window;return y(["buildID"in navigator,"MozAppearance"in(null!==(t=null===(e=document.documentElement)||void 0===e?void 0:e.style)&&void 0!==t?t:{}),"onmozfullscreenchange"in n,"mozInnerScreenX"in n,"CSSMozDocumentRule"in n,"CanvasCaptureMediaStream"in n])>=4}();if(!e&&!t)return!1;var n=window;return y(["onorientationchange"in n,"orientation"in n,e&&!("SharedWorker"in n),t&&/android/i.test(navigator.appVersion)])>=2}function T(e){var t=new Error(e);return t.name=e,t}function N(e,r,o){var a,s,c;return void 0===o&&(o=50),t(this,void 0,void 0,(function(){var t,l;return n(this,(function(n){switch(n.label){case 0:t=document,n.label=1;case 1:return t.body?[3,3]:[4,i(o)];case 2:return n.sent(),[3,1];case 3:l=t.createElement("iframe"),n.label=4;case 4:return n.trys.push([4,,10,11]),[4,new Promise((function(e,n){var o=!1,i=function(){o=!0,e()};l.onload=i,l.onerror=function(e){o=!0,n(e)};var a=l.style;a.setProperty("display","block","important"),a.position="absolute",a.top="0",a.left="0",a.visibility="hidden",r&&"srcdoc"in l?l.srcdoc=r:l.src="about:blank",t.body.appendChild(l);var s=function(){var e,t;o||("complete"===(null===(t=null===(e=l.contentWindow)||void 0===e?void 0:e.document)||void 0===t?void 0:t.readyState)?i():setTimeout(s,10))};s()}))];case 5:n.sent(),n.label=6;case 6:return(null===(s=null===(a=l.contentWindow)||void 0===a?void 0:a.document)||void 0===s?void 0:s.body)?[3,8]:[4,i(o)];case 7:return n.sent(),[3,6];case 8:return[4,e(l,l.contentWindow)];case 9:return[2,n.sent()];case 10:return null===(c=l.parentNode)||void 0===c||c.removeChild(l),[7];case 11:return[2]}}))}))}function F(e){for(var t=function(e){for(var t,n,r="Unexpected syntax '"+e+"'",o=/^\s*([a-z-]*)(.*)$/i.exec(e),i=o[1]||void 0,a={},s=/([.:#][\w-]+|\[.+?\])/gi,c=function(e,t){a[e]=a[e]||[],a[e].push(t)};;){var l=s.exec(o[2]);if(!l)break;var u=l[0];switch(u[0]){case".":c("class",u.slice(1));break;case"#":c("id",u.slice(1));break;case"[":var d=/^\[([\w-]+)([~|^$*]?=("(.*?)"|([\w-]+)))?(\s+[is])?\]$/.exec(u);if(!d)throw new Error(r);c(d[1],null!==(n=null!==(t=d[4])&&void 0!==t?t:d[5])&&void 0!==n?n:"");break;default:throw new Error(r)}}return[i,a]}(e),n=t[0],r=t[1],o=document.createElement(null!=n?n:"div"),i=0,a=Object.keys(r);i<a.length;i++){var s=a[i],c=r[s].join(" ");"style"===s?E(o.style,c):o.setAttribute(s,c)}return o}function E(e,t){for(var n=0,r=t.split(";");n<r.length;n++){var o=r[n],i=/^\s*([\w-]+)\s*:\s*(.+?)(\s*!([\w-]+))?\s*$/.exec(o);if(i){var a=i[1],s=i[2],c=i[4];e.setProperty(a,s,c||"")}}}var x=["monospace","sans-serif","serif"],V=["sans-serif-thin","ARNO PRO","Agency FB","Arabic Typesetting","Arial Unicode MS","AvantGarde Bk BT","BankGothic Md BT","Batang","Bitstream Vera Sans Mono","Calibri","Century","Century Gothic","Clarendon","EUROSTILE","Franklin Gothic","Futura Bk BT","Futura Md BT","GOTHAM","Gill Sans","HELV","Haettenschweiler","Helvetica Neue","Humanst521 BT","Leelawadee","Letter Gothic","Levenim MT","Lucida Bright","Lucida Sans","Menlo","MS Mincho","MS Outlook","MS Reference Specialty","MS UI Gothic","MT Extra","MYRIAD PRO","Marlett","Meiryo UI","Microsoft Uighur","Minion Pro","Monotype Corsiva","PMingLiU","Pristina","SCRIPTINA","Segoe UI Light","Serifa","SimHei","Small Fonts","Staccato222 BT","TRAJAN PRO","Univers CE 55 Medium","Vrinda","ZWAdobeF"];function W(e){return e.toDataURL()}var O,Z;function D(){var e=this;return function(){if(void 0===Z){var e=function(){var t=G();B(t)?Z=setTimeout(e,2500):(O=t,Z=void 0)};e()}}(),function(){return t(e,void 0,void 0,(function(){var e;return n(this,(function(t){switch(t.label){case 0:return B(e=G())?O?[2,r(O)]:function(){var e=document;return e.fullscreenElement||e.msFullscreenElement||e.mozFullScreenElement||e.webkitFullscreenElement||null}()?[4,L()]:[3,2]:[3,2];case 1:t.sent(),e=G(),t.label=2;case 2:return B(e)||(O=e),[2,e]}}))}))}}function G(){var e=screen;return[v(f(e.availTop),null),v(f(e.width)-f(e.availWidth)-v(f(e.availLeft),0),null),v(f(e.height)-f(e.availHeight)-v(f(e.availTop),0),null),v(f(e.availLeft),null)]}function B(e){for(var t=0;t<4;++t)if(e[t])return!1;return!0}function Y(e){var r;return t(this,void 0,void 0,(function(){var t,o,a,s,c,l,u;return n(this,(function(n){switch(n.label){case 0:for(t=document,o=t.createElement("div"),a=new Array(e.length),s={},X(o),u=0;u<e.length;++u)c=F(e[u]),X(l=t.createElement("div")),l.appendChild(c),o.appendChild(l),a[u]=c;n.label=1;case 1:return t.body?[3,3]:[4,i(50)];case 2:return n.sent(),[3,1];case 3:t.body.appendChild(o);try{for(u=0;u<e.length;++u)a[u].offsetParent||(s[e[u]]=!0)}finally{null===(r=o.parentNode)||void 0===r||r.removeChild(o)}return[2,s]}}))}))}function X(e){e.style.setProperty("display","block","important")}function J(e){return matchMedia("(inverted-colors: "+e+")").matches}function j(e){return matchMedia("(forced-colors: "+e+")").matches}function U(e){return matchMedia("(prefers-contrast: "+e+")").matches}function _(e){return matchMedia("(prefers-reduced-motion: "+e+")").matches}function P(e){return matchMedia("(dynamic-range: "+e+")").matches}var H=Math,z=function(){return 0};var K={default:[],apple:[{font:"-apple-system-body"}],serif:[{fontFamily:"serif"}],sans:[{fontFamily:"sans-serif"}],mono:[{fontFamily:"monospace"}],min:[{fontSize:"1px"}],system:[{fontFamily:"system-ui"}]};var Q={fonts:function(){return N((function(e,t){var n=t.document,r=n.body;r.style.fontSize="48px";var o=n.createElement("div"),i={},a={},s=function(e){var t=n.createElement("span"),r=t.style;return r.position="absolute",r.top="0",r.left="0",r.fontFamily=e,t.textContent="mmMwWLliI0O&1",o.appendChild(t),t},c=x.map(s),l=function(){for(var e={},t=function(t){e[t]=x.map((function(e){return function(e,t){return s("'"+e+"',"+t)}(t,e)}))},n=0,r=V;n<r.length;n++){t(r[n])}return e}();r.appendChild(o);for(var u=0;u<x.length;u++)i[x[u]]=c[u].offsetWidth,a[x[u]]=c[u].offsetHeight;return V.filter((function(e){return t=l[e],x.some((function(e,n){return t[n].offsetWidth!==i[e]||t[n].offsetHeight!==a[e]}));var t}))}))},domBlockers:function(e){var r=(void 0===e?{}:e).debug;return t(this,void 0,void 0,(function(){var e,t,o,i,a;return n(this,(function(n){switch(n.label){case 0:return A()||R()?(s=atob,e={abpIndo:["#Iklan-Melayang","#Kolom-Iklan-728","#SidebarIklan-wrapper",s("YVt0aXRsZT0iN25hZ2EgcG9rZXIiIGld"),'[title="ALIENBOLA" i]'],abpvn:["#quangcaomb",s("Lmlvc0Fkc2lvc0Fkcy1sYXlvdXQ="),".quangcao",s("W2hyZWZePSJodHRwczovL3I4OC52bi8iXQ=="),s("W2hyZWZePSJodHRwczovL3piZXQudm4vIl0=")],adBlockFinland:[".mainostila",s("LnNwb25zb3JpdA=="),".ylamainos",s("YVtocmVmKj0iL2NsaWNrdGhyZ2guYXNwPyJd"),s("YVtocmVmXj0iaHR0cHM6Ly9hcHAucmVhZHBlYWsuY29tL2FkcyJd")],adBlockPersian:["#navbar_notice_50",".kadr",'TABLE[width="140px"]',"#divAgahi",s("I2FkMl9pbmxpbmU=")],adBlockWarningRemoval:["#adblock-honeypot",".adblocker-root",".wp_adblock_detect",s("LmhlYWRlci1ibG9ja2VkLWFk"),s("I2FkX2Jsb2NrZXI=")],adGuardAnnoyances:['amp-embed[type="zen"]',".hs-sosyal","#cookieconsentdiv",'div[class^="app_gdpr"]',".as-oil"],adGuardBase:[".BetterJsPopOverlay",s("I2FkXzMwMFgyNTA="),s("I2Jhbm5lcmZsb2F0MjI="),s("I2FkLWJhbm5lcg=="),s("I2NhbXBhaWduLWJhbm5lcg==")],adGuardChinese:[s("LlppX2FkX2FfSA=="),s("YVtocmVmKj0iL29kMDA1LmNvbSJd"),s("YVtocmVmKj0iLmh0aGJldDM0LmNvbSJd"),".qq_nr_lad","#widget-quan"],adGuardFrench:[s("I2Jsb2NrLXZpZXdzLWFkcy1zaWRlYmFyLWJsb2NrLWJsb2Nr"),"#pavePub",s("LmFkLWRlc2t0b3AtcmVjdGFuZ2xl"),".mobile_adhesion",".widgetadv"],adGuardGerman:[s("LmJhbm5lcml0ZW13ZXJidW5nX2hlYWRfMQ=="),s("LmJveHN0YXJ0d2VyYnVuZw=="),s("LndlcmJ1bmcz"),s("YVtocmVmXj0iaHR0cDovL3d3dy5laXMuZGUvaW5kZXgucGh0bWw/cmVmaWQ9Il0="),s("YVtocmVmXj0iaHR0cHM6Ly93d3cudGlwaWNvLmNvbS8/YWZmaWxpYXRlSWQ9Il0=")],adGuardJapanese:["#kauli_yad_1",s("YVtocmVmXj0iaHR0cDovL2FkMi50cmFmZmljZ2F0ZS5uZXQvIl0="),s("Ll9wb3BJbl9pbmZpbml0ZV9hZA=="),s("LmFkZ29vZ2xl"),s("LmFkX3JlZ3VsYXIz")],adGuardMobile:[s("YW1wLWF1dG8tYWRz"),s("LmFtcF9hZA=="),'amp-embed[type="24smi"]',"#mgid_iframe1",s("I2FkX2ludmlld19hcmVh")],adGuardRussian:[s("YVtocmVmXj0iaHR0cHM6Ly9hZC5sZXRtZWFkcy5jb20vIl0="),s("LnJlY2xhbWE="),'div[id^="smi2adblock"]',s("ZGl2W2lkXj0iQWRGb3hfYmFubmVyXyJd"),s("I2FkX3NxdWFyZQ==")],adGuardSocial:[s("YVtocmVmXj0iLy93d3cuc3R1bWJsZXVwb24uY29tL3N1Ym1pdD91cmw9Il0="),s("YVtocmVmXj0iLy90ZWxlZ3JhbS5tZS9zaGFyZS91cmw/Il0="),".etsy-tweet","#inlineShare",".popup-social"],adGuardSpanishPortuguese:["#barraPublicidade","#Publicidade","#publiEspecial","#queTooltip",s("W2hyZWZePSJodHRwOi8vYWRzLmdsaXNwYS5jb20vIl0=")],adGuardTrackingProtection:["#qoo-counter",s("YVtocmVmXj0iaHR0cDovL2NsaWNrLmhvdGxvZy5ydS8iXQ=="),s("YVtocmVmXj0iaHR0cDovL2hpdGNvdW50ZXIucnUvdG9wL3N0YXQucGhwIl0="),s("YVtocmVmXj0iaHR0cDovL3RvcC5tYWlsLnJ1L2p1bXAiXQ=="),"#top100counter"],adGuardTurkish:["#backkapat",s("I3Jla2xhbWk="),s("YVtocmVmXj0iaHR0cDovL2Fkc2Vydi5vbnRlay5jb20udHIvIl0="),s("YVtocmVmXj0iaHR0cDovL2l6bGVuemkuY29tL2NhbXBhaWduLyJd"),s("YVtocmVmXj0iaHR0cDovL3d3dy5pbnN0YWxsYWRzLm5ldC8iXQ==")],bulgarian:[s("dGQjZnJlZW5ldF90YWJsZV9hZHM="),"#ea_intext_div",".lapni-pop-over","#xenium_hot_offers",s("I25ld0Fk")],easyList:[s("I0FEX0NPTlRST0xfMjg="),s("LnNlY29uZC1wb3N0LWFkcy13cmFwcGVy"),".universalboxADVBOX03",s("LmFkdmVydGlzZW1lbnQtNzI4eDkw"),s("LnNxdWFyZV9hZHM=")],easyListChina:[s("YVtocmVmKj0iLndlbnNpeHVldGFuZy5jb20vIl0="),s("LmFwcGd1aWRlLXdyYXBbb25jbGljayo9ImJjZWJvcy5jb20iXQ=="),s("LmZyb250cGFnZUFkdk0="),"#taotaole","#aafoot.top_box"],easyListCookie:["#AdaCompliance.app-notice",".text-center.rgpd",".panel--cookie",".js-cookies-andromeda",".elxtr-consent"],easyListCzechSlovak:["#onlajny-stickers",s("I3Jla2xhbW5pLWJveA=="),s("LnJla2xhbWEtbWVnYWJvYXJk"),".sklik",s("W2lkXj0ic2tsaWtSZWtsYW1hIl0=")],easyListDutch:[s("I2FkdmVydGVudGll"),s("I3ZpcEFkbWFya3RCYW5uZXJCbG9jaw=="),".adstekst",s("YVtocmVmXj0iaHR0cHM6Ly94bHR1YmUubmwvY2xpY2svIl0="),"#semilo-lrectangle"],easyListGermany:[s("I0FkX1dpbjJkYXk="),s("I3dlcmJ1bmdzYm94MzAw"),s("YVtocmVmXj0iaHR0cDovL3d3dy5yb3RsaWNodGthcnRlaS5jb20vP3NjPSJd"),s("I3dlcmJ1bmdfd2lkZXNreXNjcmFwZXJfc2NyZWVu"),s("YVtocmVmXj0iaHR0cDovL2xhbmRpbmcucGFya3BsYXR6a2FydGVpLmNvbS8/YWc9Il0=")],easyListItaly:[s("LmJveF9hZHZfYW5udW5jaQ=="),".sb-box-pubbliredazionale",s("YVtocmVmXj0iaHR0cDovL2FmZmlsaWF6aW9uaWFkcy5zbmFpLml0LyJd"),s("YVtocmVmXj0iaHR0cHM6Ly9hZHNlcnZlci5odG1sLml0LyJd"),s("YVtocmVmXj0iaHR0cHM6Ly9hZmZpbGlhemlvbmlhZHMuc25haS5pdC8iXQ==")],easyListLithuania:[s("LnJla2xhbW9zX3RhcnBhcw=="),s("LnJla2xhbW9zX251b3JvZG9z"),s("aW1nW2FsdD0iUmVrbGFtaW5pcyBza3lkZWxpcyJd"),s("aW1nW2FsdD0iRGVkaWt1b3RpLmx0IHNlcnZlcmlhaSJd"),s("aW1nW2FsdD0iSG9zdGluZ2FzIFNlcnZlcmlhaS5sdCJd")],estonian:[s("QVtocmVmKj0iaHR0cDovL3BheTRyZXN1bHRzMjQuZXUiXQ==")],fanboyAnnoyances:["#feedback-tab","#taboola-below-article",".feedburnerFeedBlock",".widget-feedburner-counter",'[title="Subscribe to our blog"]'],fanboyAntiFacebook:[".util-bar-module-firefly-visible"],fanboyEnhancedTrackers:[".open.pushModal","#issuem-leaky-paywall-articles-zero-remaining-nag","#sovrn_container",'div[class$="-hide"][zoompage-fontsize][style="display: block;"]',".BlockNag__Card"],fanboySocial:[".td-tags-and-social-wrapper-box",".twitterContainer",".youtube-social",'a[title^="Like us on Facebook"]','img[alt^="Share on Digg"]'],frellwitSwedish:[s("YVtocmVmKj0iY2FzaW5vcHJvLnNlIl1bdGFyZ2V0PSJfYmxhbmsiXQ=="),s("YVtocmVmKj0iZG9rdG9yLXNlLm9uZWxpbmsubWUiXQ=="),"article.category-samarbete",s("ZGl2LmhvbGlkQWRz"),"ul.adsmodern"],greekAdBlock:[s("QVtocmVmKj0iYWRtYW4ub3RlbmV0LmdyL2NsaWNrPyJd"),s("QVtocmVmKj0iaHR0cDovL2F4aWFiYW5uZXJzLmV4b2R1cy5nci8iXQ=="),s("QVtocmVmKj0iaHR0cDovL2ludGVyYWN0aXZlLmZvcnRobmV0LmdyL2NsaWNrPyJd"),"DIV.agores300","TABLE.advright"],hungarian:["#cemp_doboz",".optimonk-iframe-container",s("LmFkX19tYWlu"),s("W2NsYXNzKj0iR29vZ2xlQWRzIl0="),"#hirdetesek_box"],iDontCareAboutCookies:['.alert-info[data-block-track*="CookieNotice"]',".ModuleTemplateCookieIndicator",".o--cookies--container",".cookie-msg-info-container","#cookies-policy-sticky"],icelandicAbp:[s("QVtocmVmXj0iL2ZyYW1ld29yay9yZXNvdXJjZXMvZm9ybXMvYWRzLmFzcHgiXQ==")],latvian:[s("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiAxMjBweDsgaGVpZ2h0OiA0MHB4OyBvdmVyZmxvdzogaGlkZGVuOyBwb3NpdGlvbjogcmVsYXRpdmU7Il0="),s("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiA4OHB4OyBoZWlnaHQ6IDMxcHg7IG92ZXJmbG93OiBoaWRkZW47IHBvc2l0aW9uOiByZWxhdGl2ZTsiXQ==")],listKr:[s("YVtocmVmKj0iLy9hZC5wbGFuYnBsdXMuY28ua3IvIl0="),s("I2xpdmVyZUFkV3JhcHBlcg=="),s("YVtocmVmKj0iLy9hZHYuaW1hZHJlcC5jby5rci8iXQ=="),s("aW5zLmZhc3R2aWV3LWFk"),".revenue_unit_item.dable"],listeAr:[s("LmdlbWluaUxCMUFk"),".right-and-left-sponsers",s("YVtocmVmKj0iLmFmbGFtLmluZm8iXQ=="),s("YVtocmVmKj0iYm9vcmFxLm9yZyJd"),s("YVtocmVmKj0iZHViaXp6bGUuY29tL2FyLz91dG1fc291cmNlPSJd")],listeFr:[s("YVtocmVmXj0iaHR0cDovL3Byb21vLnZhZG9yLmNvbS8iXQ=="),s("I2FkY29udGFpbmVyX3JlY2hlcmNoZQ=="),s("YVtocmVmKj0id2Vib3JhbWEuZnIvZmNnaS1iaW4vIl0="),".site-pub-interstitiel",'div[id^="crt-"][data-criteo-id]'],officialPolish:["#ceneo-placeholder-ceneo-12",s("W2hyZWZePSJodHRwczovL2FmZi5zZW5kaHViLnBsLyJd"),s("YVtocmVmXj0iaHR0cDovL2Fkdm1hbmFnZXIudGVjaGZ1bi5wbC9yZWRpcmVjdC8iXQ=="),s("YVtocmVmXj0iaHR0cDovL3d3dy50cml6ZXIucGwvP3V0bV9zb3VyY2UiXQ=="),s("ZGl2I3NrYXBpZWNfYWQ=")],ro:[s("YVtocmVmXj0iLy9hZmZ0cmsuYWx0ZXgucm8vQ291bnRlci9DbGljayJd"),'a[href^="/magazin/"]',s("YVtocmVmXj0iaHR0cHM6Ly9ibGFja2ZyaWRheXNhbGVzLnJvL3Ryay9zaG9wLyJd"),s("YVtocmVmXj0iaHR0cHM6Ly9ldmVudC4ycGVyZm9ybWFudC5jb20vZXZlbnRzL2NsaWNrIl0="),s("YVtocmVmXj0iaHR0cHM6Ly9sLnByb2ZpdHNoYXJlLnJvLyJd")],ruAd:[s("YVtocmVmKj0iLy9mZWJyYXJlLnJ1LyJd"),s("YVtocmVmKj0iLy91dGltZy5ydS8iXQ=="),s("YVtocmVmKj0iOi8vY2hpa2lkaWtpLnJ1Il0="),"#pgeldiz",".yandex-rtb-block"],thaiAds:["a[href*=macau-uta-popup]",s("I2Fkcy1nb29nbGUtbWlkZGxlX3JlY3RhbmdsZS1ncm91cA=="),s("LmFkczMwMHM="),".bumq",".img-kosana"],webAnnoyancesUltralist:["#mod-social-share-2","#social-tools",s("LmN0cGwtZnVsbGJhbm5lcg=="),".zergnet-recommend",".yt.btn-link.btn-md.btn"]},t=Object.keys(e),[4,Y((a=[]).concat.apply(a,t.map((function(t){return e[t]}))))]):[2,void 0];case 1:return o=n.sent(),r&&function(e,t){for(var n="DOM blockers debug:\n```",r=0,o=Object.keys(e);r<o.length;r++){var i=o[r];n+="\n"+i+":";for(var a=0,s=e[i];a<s.length;a++){var c=s[a];n+="\n  "+(t[c]?"🚫":"➡️")+" "+c}}console.log(n+"\n```")}(e,o),(i=t.filter((function(t){var n=e[t];return y(n.map((function(e){return o[e]})))>.6*n.length}))).sort(),[2,i]}var s}))}))},fontPreferences:function(){return function(e,t){void 0===t&&(t=4e3);return N((function(n,o){var i=o.document,a=i.body,s=a.style;s.width=t+"px",s.webkitTextSizeAdjust=s.textSizeAdjust="none",k()?a.style.zoom=""+1/o.devicePixelRatio:A()&&(a.style.zoom="reset");var c=i.createElement("div");return c.textContent=r(Array(t/20<<0)).map((function(){return"word"})).join(" "),a.appendChild(c),e(i,a)}),'<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1">')}((function(e,t){for(var n={},r={},o=0,i=Object.keys(K);o<i.length;o++){var a=i[o],s=K[a],c=s[0],l=void 0===c?{}:c,u=s[1],d=void 0===u?"mmMwWLliI0fiflO&1":u,h=e.createElement("span");h.textContent=d,h.style.whiteSpace="nowrap";for(var m=0,p=Object.keys(l);m<p.length;m++){var g=p[m],f=l[g];void 0!==f&&(h.style[g]=f)}n[a]=h,t.appendChild(e.createElement("br")),t.appendChild(h)}for(var v=0,y=Object.keys(K);v<y.length;v++){r[a=y[v]]=n[a].getBoundingClientRect().width}return r}))},audio:function(){var e=window,t=e.OfflineAudioContext||e.webkitOfflineAudioContext;if(!t)return-2;if(A()&&!M()&&!function(){var e=window;return y(["DOMRectList"in e,"RTCPeerConnectionIceEvent"in e,"SVGGeometryElement"in e,"ontransitioncancel"in e])>=3}())return-1;var n=new t(1,5e3,44100),r=n.createOscillator();r.type="triangle",r.frequency.value=1e4;var o=n.createDynamicsCompressor();o.threshold.value=-50,o.knee.value=40,o.ratio.value=12,o.attack.value=0,o.release.value=.25,r.connect(o),o.connect(n.destination),r.start(0);var i=function(e){var t=3,n=500,r=500,o=5e3,i=function(){},a=new Promise((function(a,s){var c=!1,l=0,u=0;e.oncomplete=function(e){return a(e.renderedBuffer)};var d=function(){setTimeout((function(){return s(T("timeout"))}),Math.min(r,u+o-Date.now()))},h=function(){try{switch(e.startRendering(),e.state){case"running":u=Date.now(),c&&d();break;case"suspended":document.hidden||l++,c&&l>=t?s(T("suspended")):setTimeout(h,n)}}catch(e){s(e)}};h(),i=function(){c||(c=!0,u>0&&d())}}));return[a,i]}(n),a=i[0],s=i[1],l=a.then((function(e){return function(e){for(var t=0,n=0;n<e.length;++n)t+=Math.abs(e[n]);return t}(e.getChannelData(0).subarray(4500))}),(function(e){if("timeout"===e.name||"suspended"===e.name)return-3;throw e}));return c(l),function(){return s(),l}},screenFrame:function(){var e=this,r=D();return function(){return t(e,void 0,void 0,(function(){var e,t;return n(this,(function(n){switch(n.label){case 0:return[4,r()];case 1:return e=n.sent(),[2,[(t=function(e){return null===e?null:I(e,10)})(e[0]),t(e[1]),t(e[2]),t(e[3])]]}}))}))}},osCpu:function(){return navigator.oscpu},languages:function(){var e=navigator,t=[],n=e.language||e.userLanguage||e.browserLanguage||e.systemLanguage;if(void 0!==n&&t.push([n]),Array.isArray(e.languages))k()&&function(){var e=window;return y([!("MediaSettingsRange"in e),"RTCEncodedAudioFrame"in e,""+e.Intl=="[object Intl]",""+e.Reflect=="[object Reflect]"])>=3}()||t.push(e.languages);else if("string"==typeof e.languages){var r=e.languages;r&&t.push(r.split(","))}return t},colorDepth:function(){return window.screen.colorDepth},deviceMemory:function(){return v(f(navigator.deviceMemory),void 0)},screenResolution:function(){var e=screen,t=function(e){return v(g(e),null)},n=[t(e.width),t(e.height)];return n.sort().reverse(),n},hardwareConcurrency:function(){return v(g(navigator.hardwareConcurrency),void 0)},timezone:function(){var e,t=null===(e=window.Intl)||void 0===e?void 0:e.DateTimeFormat;if(t){var n=(new t).resolvedOptions().timeZone;if(n)return n}var r,o=(r=(new Date).getFullYear(),-Math.max(f(new Date(r,0,1).getTimezoneOffset()),f(new Date(r,6,1).getTimezoneOffset())));return"UTC"+(o>=0?"+":"")+Math.abs(o)},sessionStorage:function(){try{return!!window.sessionStorage}catch(e){return!0}},localStorage:function(){try{return!!window.localStorage}catch(e){return!0}},indexedDB:function(){if(!w()&&!function(){var e=window,t=navigator;return y(["msWriteProfilerMark"in e,"MSStream"in e,"msLaunchUri"in t,"msSaveBlob"in t])>=3&&!w()}())try{return!!window.indexedDB}catch(e){return!0}},openDatabase:function(){return!!window.openDatabase},cpuClass:function(){return navigator.cpuClass},platform:function(){var e=navigator.platform;return"MacIntel"===e&&A()&&!M()?function(){if("iPad"===navigator.platform)return!0;var e=screen,t=e.width/e.height;return y(["MediaSource"in window,!!Element.prototype.webkitRequestFullscreen,t>.65&&t<1.53])>=2}()?"iPad":"iPhone":e},plugins:function(){var e=navigator.plugins;if(e){for(var t=[],n=0;n<e.length;++n){var r=e[n];if(r){for(var o=[],i=0;i<r.length;++i){var a=r[i];o.push({type:a.type,suffixes:a.suffixes})}t.push({name:r.name,description:r.description,mimeTypes:o})}}return t}},canvas:function(){var e,t,n=!1,r=function(){var e=document.createElement("canvas");return e.width=1,e.height=1,[e,e.getContext("2d")]}(),o=r[0],i=r[1];if(function(e,t){return!(!t||!e.toDataURL)}(o,i)){n=function(e){return e.rect(0,0,10,10),e.rect(2,2,6,6),!e.isPointInPath(5,5,"evenodd")}(i),function(e,t){e.width=240,e.height=60,t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(100,1,62,20),t.fillStyle="#069",t.font='11pt "Times New Roman"';var n="Cwm fjordbank gly "+String.fromCharCode(55357,56835);t.fillText(n,2,15),t.fillStyle="rgba(102, 204, 0, 0.2)",t.font="18pt Arial",t.fillText(n,4,45)}(o,i);var a=W(o);a!==W(o)?e=t="unstable":(t=a,function(e,t){e.width=122,e.height=110,t.globalCompositeOperation="multiply";for(var n=0,r=[["#f2f",40,40],["#2ff",80,40],["#ff2",60,80]];n<r.length;n++){var o=r[n],i=o[0],a=o[1],s=o[2];t.fillStyle=i,t.beginPath(),t.arc(a,s,40,0,2*Math.PI,!0),t.closePath(),t.fill()}t.fillStyle="#f9c",t.arc(60,60,60,0,2*Math.PI,!0),t.arc(60,60,20,0,2*Math.PI,!0),t.fill("evenodd")}(o,i),e=W(o))}else e=t="";return{winding:n,geometry:e,text:t}},touchSupport:function(){var e,t=navigator,n=0;void 0!==t.maxTouchPoints?n=g(t.maxTouchPoints):void 0!==t.msMaxTouchPoints&&(n=t.msMaxTouchPoints);try{document.createEvent("TouchEvent"),e=!0}catch(t){e=!1}return{maxTouchPoints:n,touchEvent:e,touchStart:"ontouchstart"in window}},vendor:function(){return navigator.vendor||""},vendorFlavors:function(){for(var e=[],t=0,n=["chrome","safari","__crWeb","__gCrWeb","yandex","__yb","__ybro","__firefox__","__edgeTrackingPreventionStatistics","webkit","oprt","samsungAr","ucweb","UCShellJava","puffinDevice"];t<n.length;t++){var r=n[t],o=window[r];o&&"object"==typeof o&&e.push(r)}return e.sort()},cookiesEnabled:function(){var e=document;try{e.cookie="cookietest=1; SameSite=Strict;";var t=-1!==e.cookie.indexOf("cookietest=");return e.cookie="cookietest=1; SameSite=Strict; expires=Thu, 01-Jan-1970 00:00:01 GMT",t}catch(e){return!1}},colorGamut:function(){for(var e=0,t=["rec2020","p3","srgb"];e<t.length;e++){var n=t[e];if(matchMedia("(color-gamut: "+n+")").matches)return n}},invertedColors:function(){return!!J("inverted")||!J("none")&&void 0},forcedColors:function(){return!!j("active")||!j("none")&&void 0},monochrome:function(){if(matchMedia("(min-monochrome: 0)").matches){for(var e=0;e<=100;++e)if(matchMedia("(max-monochrome: "+e+")").matches)return e;throw new Error("Too high value")}},contrast:function(){return U("no-preference")?0:U("high")||U("more")?1:U("low")||U("less")?-1:U("forced")?10:void 0},reducedMotion:function(){return!!_("reduce")||!_("no-preference")&&void 0},hdr:function(){return!!P("high")||!P("standard")&&void 0},math:function(){var e,t=H.acos||z,n=H.acosh||z,r=H.asin||z,o=H.asinh||z,i=H.atanh||z,a=H.atan||z,s=H.sin||z,c=H.sinh||z,l=H.cos||z,u=H.cosh||z,d=H.tan||z,h=H.tanh||z,m=H.exp||z,p=H.expm1||z,g=H.log1p||z;return{acos:t(.12312423423423424),acosh:n(1e308),acoshPf:(e=1e154,H.log(e+H.sqrt(e*e-1))),asin:r(.12312423423423424),asinh:o(1),asinhPf:function(e){return H.log(e+H.sqrt(e*e+1))}(1),atanh:i(.5),atanhPf:function(e){return H.log((1+e)/(1-e))/2}(.5),atan:a(.5),sin:s(-1e300),sinh:c(1),sinhPf:function(e){return H.exp(e)-1/H.exp(e)/2}(1),cos:l(10.000000000123),cosh:u(1),coshPf:function(e){return(H.exp(e)+1/H.exp(e))/2}(1),tan:d(-1e300),tanh:h(1),tanhPf:function(e){return(H.exp(2*e)-1)/(H.exp(2*e)+1)}(1),exp:m(1),expm1:p(1),expm1Pf:function(e){return H.exp(e)-1}(1),log1p:g(10),log1pPf:function(e){return H.log(1+e)}(10),powPI:function(e){return H.pow(H.PI,e)}(-100)}}};function q(e){var t=function(e){if(R())return.4;if(A())return M()?.5:.3;var t=e.platform.value||"";if(/^Win/.test(t))return.6;if(/^Mac/.test(t))return.5;return.7}(e),n=function(e){return I(.99+.01*e,1e-4)}(t);return{score:t,comment:"$ if upgrade to Pro: https://fpjs.dev/pro".replace(/\$/g,""+n)}}function $(t){return JSON.stringify(t,(function(t,n){return n instanceof Error?e({name:(r=n).name,message:r.message,stack:null===(o=r.stack)||void 0===o?void 0:o.split("\n")},r):n;var r,o}),2)}function ee(e){return function(e,t){t=t||0;var n,r=(e=e||"").length%16,o=e.length-r,i=[0,t],a=[0,t],s=[0,0],c=[0,0],g=[2277735313,289559509],f=[1291169091,658871167];for(n=0;n<o;n+=16)s=[255&e.charCodeAt(n+4)|(255&e.charCodeAt(n+5))<<8|(255&e.charCodeAt(n+6))<<16|(255&e.charCodeAt(n+7))<<24,255&e.charCodeAt(n)|(255&e.charCodeAt(n+1))<<8|(255&e.charCodeAt(n+2))<<16|(255&e.charCodeAt(n+3))<<24],c=[255&e.charCodeAt(n+12)|(255&e.charCodeAt(n+13))<<8|(255&e.charCodeAt(n+14))<<16|(255&e.charCodeAt(n+15))<<24,255&e.charCodeAt(n+8)|(255&e.charCodeAt(n+9))<<8|(255&e.charCodeAt(n+10))<<16|(255&e.charCodeAt(n+11))<<24],s=d(s=u(s,g),31),i=l(i=d(i=m(i,s=u(s,f)),27),a),i=l(u(i,[0,5]),[0,1390208809]),c=d(c=u(c,f),33),a=l(a=d(a=m(a,c=u(c,g)),31),i),a=l(u(a,[0,5]),[0,944331445]);switch(s=[0,0],c=[0,0],r){case 15:c=m(c,h([0,e.charCodeAt(n+14)],48));case 14:c=m(c,h([0,e.charCodeAt(n+13)],40));case 13:c=m(c,h([0,e.charCodeAt(n+12)],32));case 12:c=m(c,h([0,e.charCodeAt(n+11)],24));case 11:c=m(c,h([0,e.charCodeAt(n+10)],16));case 10:c=m(c,h([0,e.charCodeAt(n+9)],8));case 9:c=u(c=m(c,[0,e.charCodeAt(n+8)]),f),a=m(a,c=u(c=d(c,33),g));case 8:s=m(s,h([0,e.charCodeAt(n+7)],56));case 7:s=m(s,h([0,e.charCodeAt(n+6)],48));case 6:s=m(s,h([0,e.charCodeAt(n+5)],40));case 5:s=m(s,h([0,e.charCodeAt(n+4)],32));case 4:s=m(s,h([0,e.charCodeAt(n+3)],24));case 3:s=m(s,h([0,e.charCodeAt(n+2)],16));case 2:s=m(s,h([0,e.charCodeAt(n+1)],8));case 1:s=u(s=m(s,[0,e.charCodeAt(n)]),g),i=m(i,s=u(s=d(s,31),f))}return i=l(i=m(i,[0,e.length]),a=m(a,[0,e.length])),a=l(a,i),i=l(i=p(i),a=p(a)),a=l(a,i),("00000000"+(i[0]>>>0).toString(16)).slice(-8)+("00000000"+(i[1]>>>0).toString(16)).slice(-8)+("00000000"+(a[0]>>>0).toString(16)).slice(-8)+("00000000"+(a[1]>>>0).toString(16)).slice(-8)}(function(e){for(var t="",n=0,r=Object.keys(e).sort();n<r.length;n++){var o=r[n],i=e[o],a=i.error?"error":JSON.stringify(i.value);t+=(t?"|":"")+o.replace(/([:|\\])/g,"\\$1")+":"+a}return t}(e))}function te(e){return void 0===e&&(e=50),function(e,t){void 0===t&&(t=1/0);var n=window.requestIdleCallback;return n?new Promise((function(e){return n.call(window,(function(){return e()}),{timeout:t})})):i(Math.min(e,t))}(e,2*e)}function ne(e,r){var i=Date.now();return{get:function(a){return t(this,void 0,void 0,(function(){var t,s,c;return n(this,(function(n){switch(n.label){case 0:return t=Date.now(),[4,e()];case 1:return s=n.sent(),c=function(e){var t;return{get visitorId(){return void 0===t&&(t=ee(this.components)),t},set visitorId(e){t=e},confidence:q(e),components:e,version:o}}(s),(r||(null==a?void 0:a.debug))&&console.log("Copy the text below to get the debug data:\n\n```\nversion: "+c.version+"\nuserAgent: "+navigator.userAgent+"\ntimeBetweenLoadAndGet: "+(t-i)+"\nvisitorId: "+c.visitorId+"\ncomponents: "+$(s)+"\n```"),[2,c]}}))}))}}}var re={load:function(e){var r=void 0===e?{}:e,o=r.delayFallback,i=r.debug,a=r.monitoring,s=void 0===a||a;return t(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return s&&function(){if(!(window.__fpjs_d_m||Math.random()>=.001))try{var e=new XMLHttpRequest;e.open("get","https://m1.openfpcdn.io/fingerprintjs/v3.3.6/npm-monitoring",!0),e.send()}catch(e){console.error(e)}}(),[4,te(o)];case 1:return e.sent(),[2,ne(S(Q,{debug:i},[]),i)]}}))}))},hashComponents:ee,componentsToDebugString:$};const oe="__Web_Monitor_List__";class ie{constructor(e,t){this.method="post",this.endpoint=e,this.instance=t}post(e){window.navigator.sendBeacon(this.endpoint,JSON.stringify(e))}}class ae{constructor(e,t,n,r=1){this.endpoint=e,this.instance=t,this.method=n,this.threshold=r,this.origin_threshold=r,this.cache=[]}real_post(){const e=this,t=this.cache,n={appid:this.instance.appid,logger:t};return new Promise(((t,r)=>{var o;const i=new XMLHttpRequest;i.open(e.method,e.endpoint),i.setRequestHeader("Content-Type","application/json"),null===(o=this.instance.nativeXHRSend)||void 0===o||o.call(i,JSON.stringify(n)),i.addEventListener("readystatechange",(function(){var n;4==this.readyState&&((n=this.status)>=400&&n<600?(e.threshold*=2,localStorage.setItem(oe,JSON.stringify(e.cache))):(e.threshold!==e.origin_threshold&&(e.threshold/=2),e.cache=[],localStorage.removeItem(oe)),t(this.response))}))}))}post(e){return this.cache.push(e),this.cache.length<this.threshold?(localStorage.setItem(oe,JSON.stringify(this.cache)),Promise.resolve("cache success")):this.real_post()}}class se{constructor(e,t,n,r=.5){this.plugins=[],this.appid=e,this.endpoint=t,this.method=n,this.sample_rate=r>1?1:r<0?0:r}initSender(){console.error("需要重写 InitSender 方法")}}var ce;!function(e){e.post="post",e.get="get"}(ce||(ce={}));const le="unknown";class ue{constructor(){this.userAgent=navigator.userAgent,this.dateTime=Date.now().valueOf(),this.did=window.__SNIPER__.fingerprint||le,this.uid=window.__SNIPER__.uid||le,this.path=window.location.href}}class de extends ue{constructor(){super(...arguments),this.category="stability"}}class he extends ue{constructor(){super(...arguments),this.category="performance"}}class me extends ue{constructor(){super(...arguments),this.category="behavior"}}class pe extends de{constructor(e,t,n){super(),this.type="JS",this.message=e,this.stack=t,this.rrwebStack=n}}class ge extends pe{constructor(e,t,n){super(e,t,n)}}class fe extends de{constructor(e,t){super(),this.type="HTTP",this.statusCode=e,this.url=t}}class ve extends de{constructor(e,t){super(),this.type="Resource",this.resourceType=e,this.src=t}}class ye extends de{constructor(){super(),this.type="Collapse",this.rrwebStack=[]}}class Ie extends he{constructor(e,t){super(),this.type="HTTP",this.duration=e,this.url=t}}class Ce extends he{constructor(e,t,n){super(),this.type="Resource",this.resourceType=e,this.src=t,this.duration=n}}class be extends he{constructor(e){return super(),this.type="WebVitals",Object.assign(Object.assign({},this),e)}}class Se extends he{constructor(e,t,n,r){super(),this.type="LongTimeTask",this.startTime=e,this.duration=t,this.eventType=n,this.eventName=r}}class we extends me{constructor(e){super(),this.type="PV",this.uid=e}}class ke{constructor(e){this.monitor=e}init(){this.error_listener=e=>{var t;const n=new pe(e.message,null===(t=e.error)||void 0===t?void 0:t.stack,this.monitor.rrwebStack);this.monitor.send(n)},this.promise_listener=e=>{var t;const n=new ge(e.message,null===(t=e.error)||void 0===t?void 0:t.stack,this.monitor.rrwebStack);this.monitor.send(n)}}run(){this.monitor.trackJSError=e=>{const t=new pe(e.message,(null==e?void 0:e.stack)||"",this.monitor.rrwebStack);this.monitor.send(t)},window.addEventListener("error",this.error_listener),window.addEventListener("unhandledrejection",this.promise_listener)}unload(){window.removeEventListener("error",this.error_listener),window.removeEventListener("unhandledrejection",this.promise_listener)}}class Ae{constructor(e){this.monitor=e}init(){}run(){const e=this;if(this.nativeXHRSend=XMLHttpRequest.prototype.send,this.monitor.nativeXHRSend=this.nativeXHRSend,XMLHttpRequest.prototype.send=function(...t){const n=Date.now();this.addEventListener("readystatechange",(function(){const t=this.responseURL;if(4==this.readyState&&((r=this.status)>=400&&r<600)){const n=this.status,r=new fe(n,t);e.monitor.send(r)}else{const r=Date.now().valueOf()-n.valueOf(),o=new Ie(r,t);e.monitor.send(o)}var r})),e.nativeXHRSend.apply(this,t)},!window.fetch)return;this.nativeFetch=fetch;const t=this;window.fetch=function(...e){const n=t.nativeFetch._fetch(...e),r=Date.now();return n.then((e=>{if(e.ok){const n=Date.now().valueOf()-r.valueOf(),o=e.url,i=new Ie(n,o);t.monitor.send(i)}else{const n=e.url,r=e.status,o=new fe(r,n);t.monitor.send(o)}}),(e=>{})),n}}unload(){XMLHttpRequest.prototype.send=this.nativeXHRSend,window.fetch=this.nativeFetch}}var Me;!function(e){e.Image="img",e.CSS="link",e.Javascript="script",e.Video="video",e.Audio="audio",e.Unknown="unknown"}(Me||(Me={}));const Le={link:Me.CSS,script:Me.Javascript,img:Me.Image,video:Me.Video,audio:Me.Audio,unknown:Me.Unknown};class Re{constructor(e){this.listener=null,this.performanceObserver=null,this.monitor=e}init(){}run(){const e=this;if("function"==typeof PerformanceObserver)this.performanceObserver=new PerformanceObserver(((t,n)=>{t.getEntriesByType("resource").forEach((t=>{if("xmlhttprequest"==t.initiatorType)return;const n=0==t.transferSize;let r=null;const o=t.name,i=t.initiatorType;if(n)r=new ve(Le[i],o);else{const e=t.duration;r=new Ce(Le[i],o,e)}e.monitor.send(r)}))})),this.performanceObserver.observe({entryTypes:["resource"]});else{const e=function(e){const t=e.target;if(t==window)return;const n=t.nodeName;if("LINK"==n){const e=buildAttributesObject(t.attributes,["rel","type","href","as"]),n=(r=e,function(){const{rel:e,type:t,href:n,as:o}=r;return Boolean("stylesheet"==e||"text/css"==t||(null==n?void 0:n.includes(".css"))||"style"==o)}()?Me.CSS:function(){const{rel:e,type:t,href:n,as:o}=r,i=(null==n?void 0:n.split(".").pop())||"";return Boolean("icon"==e||"app-touch-icon"==e||"mask-icon"==e||"image/png"==t||["jpg","jpeg","png","gif","svg","bmp","ico","webp"].includes(i)||"image"==o)}()?Me.Image:Me.Unknown),o=e.href;new ve(Le[n],o)}else{const e=n.toLowerCase(),r=t.src;new ve(Le[e],r)}var r};this.listener=e,window.addEventListener("error",e,!0)}}unload(){this.listener&&window.removeEventListener("error",this.listener)}}class Te{constructor(e){this.monitor=e,this.worker=null}init(){}run(){const e=new Blob(['\n/*\n    每隔 1s 向主线程发送一个检测包\n    然后将这个包放入队列中\n\n    收到主线程的包后，队列出队\n    //TODO: 这个“5”后续可以配置\n    当队列中的待确认包大于五个的时候，诊断为页面卡死\n    并且把页面已经卡死标注 = true\n*/ \nconst msgQueue = [];\n// 崩溃只上报一次\nlet   isPost   = false;\n\n// 把日志生成发进来，后续只修改 rrweb 和 datetime\nlet   loggerBased = {};\nlet   endpoint = "";\nlet   method   = "";\nlet   app      = ""\'\n\nfunction post(){\n    loggerBased.path = location.protocol + \'//\' + location.hostname + (location.port ? \':\' + location.port : \'\') + location.pathname + location.search;\n    isPost = true;\n\n    if(method == "get" || method == "GET"){\n        const params = new URLSearchParams();\n        const keys = Object.keys(loggerBased);\n        keys.forEach(key=>{\n            params.append(key, JSON.stringify(loggerBased[key]));\n        })\n        fetch(endpoint+"?"+params, {\n            method: method,\n        })\n    }else{\n\n        fetch(endpoint, {\n            method: method,\n            headers: {\n                \'Content-Type\': \'application/json\'\n            },\n            body: {\n                appid,\n                loggers: JSON.stringify(loggerBased)\n            }\n        })\n    }\n}\nfunction init(logger, _endpoint, _method){\n    loggerBased = logger;\n    appid       = _appid\n    endpoint    = _endpoint;\n    method      = _method;\n}\n\nself.onmessage = function(e){\n    const data = e.data;\n    const rrweb = data.rrwebStack;\n    const type = data.type;\n    switch(type){\n        case "init":\n            init(data.logger, data.endpoint, data.method);\n            break;\n        case "sync":\n            loggerBased.rrwebStack = data.rrwebStack;\n            msgQueue.shift();\n            break;\n    }\n}\n\n\nvar timer = setInterval(()=>{\n    if(isPost){\n        clearInterval(timer);\n        return;\n    }\n    if(msgQueue.length >= 5){\n        post();\n    }\n    const queItem = "Web_Monitor_Test"\n    postMessage(queItem);\n    msgQueue.push(queItem);\n\n\n}, 1000);\n\n']),t=new Worker(URL.createObjectURL(e));this.worker=t,t.postMessage({type:"init",endpoint:this.monitor.endpoint,method:this.monitor.method,logger:new ye,appid:this.monitor.appid}),t.addEventListener("message",(e=>{const n=e.data;t.postMessage({type:"sync",data:n,rrwebStack:this.monitor.rrwebStack})}))}unload(){this.worker&&this.worker.terminate()}}class Ne{constructor(e){this.monitor=e}init(){}run(){this.observer=new PerformanceObserver((e=>{e.getEntries().forEach((e=>{if(e.duration<this.monitor.longtask_time)return;const{startTime:t,duration:n,entryType:r,name:o}=e,i=new Se(t,n,r,o);this.monitor.send(i)}))})),this.observer.observe({entryTypes:["longtask"]})}unload(){var e;null===(e=this.observer)||void 0===e||e.disconnect()}}var Fe,Ee,xe,Ve,We,Oe=-1,Ze=function(e){addEventListener("pageshow",(function(t){t.persisted&&(Oe=t.timeStamp,e(t))}),!0)},De=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},Ge=function(){var e=De();return e&&e.activationStart||0},Be=function(e,t){var n=De(),r="navigate";return Oe>=0?r="back-forward-cache":n&&(r=document.prerendering||Ge()>0?"prerender":document.wasDiscarded?"restore":n.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},Ye=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},Xe=function(e,t){var n=function n(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},Je=function(e,t,n,r){var o,i;return function(a){t.value>=0&&(a||r)&&((i=t.value-(o||0))||void 0===o)&&(o=t.value,t.delta=i,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},je=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},Ue=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},_e=-1,Pe=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},He=function(e){"hidden"===document.visibilityState&&_e>-1&&(_e="visibilitychange"===e.type?e.timeStamp:0,Ke())},ze=function(){addEventListener("visibilitychange",He,!0),addEventListener("prerenderingchange",He,!0)},Ke=function(){removeEventListener("visibilitychange",He,!0),removeEventListener("prerenderingchange",He,!0)},Qe=function(){return _e<0&&(_e=Pe(),ze(),Ze((function(){setTimeout((function(){_e=Pe(),ze()}),0)}))),{get firstHiddenTime(){return _e}}},qe=function(e,t){t=t||{},Ue((function(){var n,r=[1800,3e3],o=Qe(),i=Be("FCP"),a=Ye("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(a.disconnect(),e.startTime<o.firstHiddenTime&&(i.value=Math.max(e.startTime-Ge(),0),i.entries.push(e),n(!0)))}))}));a&&(n=Je(e,i,r,t.reportAllChanges),Ze((function(o){i=Be("FCP"),n=Je(e,i,r,t.reportAllChanges),je((function(){i.value=performance.now()-o.timeStamp,n(!0)}))})))}))},$e=function(e,t){t=t||{},Ue((function(){var n,r=[.1,.25],o=Be("CLS"),i=-1,a=0,s=[],c=function(t){i>-1&&e(t)},l=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=s[0],r=s[s.length-1];a&&e.startTime-r.startTime<1e3&&e.startTime-t.startTime<5e3?(a+=e.value,s.push(e)):(a=e.value,s=[e]),a>o.value&&(o.value=a,o.entries=s,n())}}))},u=Ye("layout-shift",l);u&&(n=Je(c,o,r,t.reportAllChanges),qe((function(e){i=e.value,o.value<0&&(o.value=0,n())})),Xe((function(){l(u.takeRecords()),n(!0)})),Ze((function(){a=0,i=-1,o=Be("CLS",0),n=Je(c,o,r,t.reportAllChanges),je((function(){return n()}))})))}))},et={passive:!0,capture:!0},tt=new Date,nt=function(e,t){Fe||(Fe=t,Ee=e,xe=new Date,it(removeEventListener),rt())},rt=function(){if(Ee>=0&&Ee<xe-tt){var e={entryType:"first-input",name:Fe.type,target:Fe.target,cancelable:Fe.cancelable,startTime:Fe.timeStamp,processingStart:Fe.timeStamp+Ee};Ve.forEach((function(t){t(e)})),Ve=[]}},ot=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){nt(e,t),o()},r=function(){o()},o=function(){removeEventListener("pointerup",n,et),removeEventListener("pointercancel",r,et)};addEventListener("pointerup",n,et),addEventListener("pointercancel",r,et)}(t,e):nt(t,e)}},it=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,ot,et)}))},at=function(e,t){t=t||{},Ue((function(){var n,r=[100,300],o=Qe(),i=Be("FID"),a=function(e){e.startTime<o.firstHiddenTime&&(i.value=e.processingStart-e.startTime,i.entries.push(e),n(!0))},s=function(e){e.forEach(a)},c=Ye("first-input",s);n=Je(e,i,r,t.reportAllChanges),c&&Xe((function(){s(c.takeRecords()),c.disconnect()}),!0),c&&Ze((function(){var o;i=Be("FID"),n=Je(e,i,r,t.reportAllChanges),Ve=[],Ee=-1,Fe=null,it(addEventListener),o=a,Ve.push(o),rt()}))}))},st={},ct=function(e,t){t=t||{},Ue((function(){var n,r=[2500,4e3],o=Qe(),i=Be("LCP"),a=function(e){var t=e[e.length-1];if(t){var r=Math.max(t.startTime-Ge(),0);r<o.firstHiddenTime&&(i.value=r,i.entries=[t],n())}},s=Ye("largest-contentful-paint",a);if(s){n=Je(e,i,r,t.reportAllChanges);var c=function(){st[i.id]||(a(s.takeRecords()),s.disconnect(),st[i.id]=!0,n(!0))};["keydown","click"].forEach((function(e){addEventListener(e,c,{once:!0,capture:!0})})),Xe(c,!0),Ze((function(o){i=Be("LCP"),n=Je(e,i,r,t.reportAllChanges),je((function(){i.value=performance.now()-o.timeStamp,st[i.id]=!0,n(!0)}))}))}}))},lt=function e(t){document.prerendering?Ue((function(){return e(t)})):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)},ut=function(e,t){t=t||{};var n=[800,1800],r=Be("TTFB"),o=Je(e,r,n,t.reportAllChanges);lt((function(){var i=De();if(i){var a=i.responseStart;if(a<=0||a>performance.now())return;r.value=Math.max(a-Ge(),0),r.entries=[i],o(!0),Ze((function(){r=Be("TTFB",0),(o=Je(e,r,n,t.reportAllChanges))(!0)}))}}))};class dt{constructor(e){this.monitor=e,this.performance={}}init(){}run(){return t(this,void 0,void 0,(function*(){const e=e=>{const t=new be(e);this.monitor.send(t)};[$e,at,ct,qe,ut].forEach((t=>{t(e)}))}))}unload(){}}function ht(e){var t=null==e?void 0:e.host;return Boolean((null==t?void 0:t.shadowRoot)===e)}function mt(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function pt(e){try{var t=e.rules||e.cssRules;return t?((n=Array.from(t).map(gt).join("")).includes(" background-clip: text;")&&!n.includes(" -webkit-background-clip: text;")&&(n=n.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),n):null}catch(e){return null}var n}function gt(e){var t=e.cssText;if(function(e){return"styleSheet"in e}(e))try{t=pt(e.styleSheet)||t}catch(e){}return t}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(We||(We={}));var ft=function(){function e(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return e.prototype.getId=function(e){var t;if(!e)return-1;var n=null===(t=this.getMeta(e))||void 0===t?void 0:t.id;return null!=n?n:-1},e.prototype.getNode=function(e){return this.idNodeMap.get(e)||null},e.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},e.prototype.getMeta=function(e){return this.nodeMetaMap.get(e)||null},e.prototype.removeNodeFromMap=function(e){var t=this,n=this.getId(e);this.idNodeMap.delete(n),e.childNodes&&e.childNodes.forEach((function(e){return t.removeNodeFromMap(e)}))},e.prototype.has=function(e){return this.idNodeMap.has(e)},e.prototype.hasNode=function(e){return this.nodeMetaMap.has(e)},e.prototype.add=function(e,t){var n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)},e.prototype.replace=function(e,t){var n=this.getNode(e);if(n){var r=this.nodeMetaMap.get(n);r&&this.nodeMetaMap.set(t,r)}this.idNodeMap.set(e,t)},e.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},e}();function vt(e){var t=e.maskInputOptions,n=e.tagName,r=e.type,o=e.value,i=e.maskInputFn,a=o||"";return(t[n.toLowerCase()]||t[r])&&(a=i?i(a):"*".repeat(a.length)),a}var yt="__rrweb_original__";var It,Ct,bt=1,St=new RegExp("[^a-z0-9-_:]");function wt(){return bt++}var kt=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,At=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,Mt=/^(data:)([^,]*),(.*)/i;function Lt(e,t){return(e||"").replace(kt,(function(e,n,r,o,i,a){var s,c=r||i||a,l=n||o||"";if(!c)return e;if(!At.test(c))return"url(".concat(l).concat(c).concat(l,")");if(Mt.test(c))return"url(".concat(l).concat(c).concat(l,")");if("/"===c[0])return"url(".concat(l).concat((s=t,(s.indexOf("//")>-1?s.split("/").slice(0,3).join("/"):s.split("/")[0]).split("?")[0]+c)).concat(l,")");var u=t.split("/"),d=c.split("/");u.pop();for(var h=0,m=d;h<m.length;h++){var p=m[h];"."!==p&&(".."===p?u.pop():u.push(p))}return"url(".concat(l).concat(u.join("/")).concat(l,")")}))}var Rt=/^[^ \t\n\r\u000c]+/,Tt=/^[, \t\n\r\u000c]+/;function Nt(e,t){if(!t||""===t.trim())return t;var n=e.createElement("a");return n.href=t,n.href}function Ft(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function Et(){var e=document.createElement("a");return e.href="",e.href}function xt(e,t,n,r){return"src"===n||"href"===n&&r&&("use"!==t||"#"!==r[0])||"xlink:href"===n&&r&&"#"!==r[0]?Nt(e,r):"background"!==n||!r||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n&&r?function(e,t){if(""===t.trim())return t;var n=0;function r(e){var r,o=e.exec(t.substring(n));return o?(r=o[0],n+=r.length,r):""}for(var o=[];r(Tt),!(n>=t.length);){var i=r(Rt);if(","===i.slice(-1))i=Nt(e,i.substring(0,i.length-1)),o.push(i);else{var a="";i=Nt(e,i);for(var s=!1;;){var c=t.charAt(n);if(""===c){o.push((i+a).trim());break}if(s)")"===c&&(s=!1);else{if(","===c){n+=1,o.push((i+a).trim());break}"("===c&&(s=!0)}a+=c,n+=1}}}return o.join(", ")}(e,r):"style"===n&&r?Lt(r,Et()):"object"===t&&"data"===n&&r?Nt(e,r):r:Nt(e,r)}function Vt(e,t,n){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return!!n&&Vt(e.parentNode,t,n);for(var r=e.classList.length;r--;){var o=e.classList[r];if(t.test(o))return!0}return!!n&&Vt(e.parentNode,t,n)}function Wt(e,t,n){var r=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===r)return!1;if("string"==typeof t){if(r.classList.contains(t))return!0;if(r.closest(".".concat(t)))return!0}else if(Vt(r,t,!0))return!0;if(n){if(r.matches(n))return!0;if(r.closest(n))return!0}return!1}function Ot(e,t){var n=t.doc,r=t.mirror,o=t.blockClass,i=t.blockSelector,a=t.maskTextClass,s=t.maskTextSelector,c=t.inlineStylesheet,l=t.maskInputOptions,u=void 0===l?{}:l,d=t.maskTextFn,h=t.maskInputFn,m=t.dataURLOptions,p=void 0===m?{}:m,g=t.inlineImages,f=t.recordCanvas,v=t.keepIframeSrcFn,y=t.newlyAddedElement,I=void 0!==y&&y,C=function(e,t){if(!t.hasNode(e))return;var n=t.getId(e);return 1===n?void 0:n}(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:We.Document,childNodes:[],compatMode:e.compatMode}:{type:We.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:We.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:C};case e.ELEMENT_NODE:return function(e,t){for(var n=t.doc,r=t.blockClass,o=t.blockSelector,i=t.inlineStylesheet,a=t.maskInputOptions,s=void 0===a?{}:a,c=t.maskInputFn,l=t.dataURLOptions,u=void 0===l?{}:l,d=t.inlineImages,h=t.recordCanvas,m=t.keepIframeSrcFn,p=t.newlyAddedElement,g=void 0!==p&&p,f=t.rootId,v=function(e,t,n){if("string"==typeof t){if(e.classList.contains(t))return!0}else for(var r=e.classList.length;r--;){var o=e.classList[r];if(t.test(o))return!0}return!!n&&e.matches(n)}(e,r,o),y=function(e){if(e instanceof HTMLFormElement)return"form";var t=e.tagName.toLowerCase().trim();return St.test(t)?"div":t}(e),I={},C=e.attributes.length,b=0;b<C;b++){var S=e.attributes[b];I[S.name]=xt(n,y,S.name,S.value)}if("link"===y&&i){var w=Array.from(n.styleSheets).find((function(t){return t.href===e.href})),k=null;w&&(k=pt(w)),k&&(delete I.rel,delete I.href,I._cssText=Lt(k,w.href))}if("style"===y&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){(k=pt(e.sheet))&&(I._cssText=Lt(k,Et()))}if("input"===y||"textarea"===y||"select"===y){var A=e.value,M=e.checked;"radio"!==I.type&&"checkbox"!==I.type&&"submit"!==I.type&&"button"!==I.type&&A?I.value=vt({type:I.type,tagName:y,value:A,maskInputOptions:s,maskInputFn:c}):M&&(I.checked=M)}"option"===y&&(e.selected&&!s.select?I.selected=!0:delete I.selected);if("canvas"===y&&h)if("2d"===e.__context)(function(e){var t=e.getContext("2d");if(!t)return!0;for(var n=0;n<e.width;n+=50)for(var r=0;r<e.height;r+=50){var o=t.getImageData,i=yt in o?o[yt]:o;if(new Uint32Array(i.call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some((function(e){return 0!==e})))return!1}return!0})(e)||(I.rr_dataURL=e.toDataURL(u.type,u.quality));else if(!("__context"in e)){var L=e.toDataURL(u.type,u.quality),R=document.createElement("canvas");R.width=e.width,R.height=e.height,L!==R.toDataURL(u.type,u.quality)&&(I.rr_dataURL=L)}if("img"===y&&d){It||(It=n.createElement("canvas"),Ct=It.getContext("2d"));var T=e,N=T.crossOrigin;T.crossOrigin="anonymous";var F=function(){try{It.width=T.naturalWidth,It.height=T.naturalHeight,Ct.drawImage(T,0,0),I.rr_dataURL=It.toDataURL(u.type,u.quality)}catch(e){console.warn("Cannot inline img src=".concat(T.currentSrc,"! Error: ").concat(e))}N?I.crossOrigin=N:T.removeAttribute("crossorigin")};T.complete&&0!==T.naturalWidth?F():T.onload=F}"audio"!==y&&"video"!==y||(I.rr_mediaState=e.paused?"paused":"played",I.rr_mediaCurrentTime=e.currentTime);g||(e.scrollLeft&&(I.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(I.rr_scrollTop=e.scrollTop));if(v){var E=e.getBoundingClientRect(),x=E.width,V=E.height;I={class:I.class,rr_width:"".concat(x,"px"),rr_height:"".concat(V,"px")}}"iframe"!==y||m(I.src)||(e.contentDocument||(I.rr_src=I.src),delete I.src);return{type:We.Element,tagName:y,attributes:I,childNodes:[],isSVG:Ft(e)||void 0,needBlock:v,rootId:f}}(e,{doc:n,blockClass:o,blockSelector:i,inlineStylesheet:c,maskInputOptions:u,maskInputFn:h,dataURLOptions:p,inlineImages:g,recordCanvas:f,keepIframeSrcFn:v,newlyAddedElement:I,rootId:C});case e.TEXT_NODE:return function(e,t){var n,r=t.maskTextClass,o=t.maskTextSelector,i=t.maskTextFn,a=t.rootId,s=e.parentNode&&e.parentNode.tagName,c=e.textContent,l="STYLE"===s||void 0,u="SCRIPT"===s||void 0;if(l&&c){try{e.nextSibling||e.previousSibling||(null===(n=e.parentNode.sheet)||void 0===n?void 0:n.cssRules)&&(c=(d=e.parentNode.sheet).cssRules?Array.from(d.cssRules).map((function(e){return e.cssText||""})).join(""):"")}catch(t){console.warn("Cannot get CSS styles from text's parentNode. Error: ".concat(t),e)}c=Lt(c,Et())}var d;u&&(c="SCRIPT_PLACEHOLDER");!l&&!u&&c&&Wt(e,r,o)&&(c=i?i(c):c.replace(/[\S]/g,"*"));return{type:We.Text,textContent:c||"",isStyle:l,rootId:a}}(e,{maskTextClass:a,maskTextSelector:s,maskTextFn:d,rootId:C});case e.CDATA_SECTION_NODE:return{type:We.CDATA,textContent:"",rootId:C};case e.COMMENT_NODE:return{type:We.Comment,textContent:e.textContent||"",rootId:C};default:return!1}}function Zt(e){return void 0===e?"":e.toLowerCase()}function Dt(e,t){var n,r=t.doc,o=t.mirror,i=t.blockClass,a=t.blockSelector,s=t.maskTextClass,c=t.maskTextSelector,l=t.skipChild,u=void 0!==l&&l,d=t.inlineStylesheet,h=void 0===d||d,m=t.maskInputOptions,p=void 0===m?{}:m,g=t.maskTextFn,f=t.maskInputFn,v=t.slimDOMOptions,y=t.dataURLOptions,I=void 0===y?{}:y,C=t.inlineImages,b=void 0!==C&&C,S=t.recordCanvas,w=void 0!==S&&S,k=t.onSerialize,A=t.onIframeLoad,M=t.iframeLoadTimeout,L=void 0===M?5e3:M,R=t.onStylesheetLoad,T=t.stylesheetLoadTimeout,N=void 0===T?5e3:T,F=t.keepIframeSrcFn,E=void 0===F?function(){return!1}:F,x=t.newlyAddedElement,V=void 0!==x&&x,W=t.preserveWhiteSpace,O=void 0===W||W,Z=Ot(e,{doc:r,mirror:o,blockClass:i,blockSelector:a,maskTextClass:s,maskTextSelector:c,inlineStylesheet:h,maskInputOptions:p,maskTextFn:g,maskInputFn:f,dataURLOptions:I,inlineImages:b,recordCanvas:w,keepIframeSrcFn:E,newlyAddedElement:V});if(!Z)return console.warn(e,"not serialized"),null;n=o.hasNode(e)?o.getId(e):!function(e,t){if(t.comment&&e.type===We.Comment)return!0;if(e.type===We.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&"preload"===e.attributes.rel&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(Zt(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===Zt(e.attributes.name)||"icon"===Zt(e.attributes.rel)||"apple-touch-icon"===Zt(e.attributes.rel)||"shortcut icon"===Zt(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&Zt(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(Zt(e.attributes.property).match(/^(og|twitter|fb):/)||Zt(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===Zt(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===Zt(e.attributes.name)||"googlebot"===Zt(e.attributes.name)||"bingbot"===Zt(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===Zt(e.attributes.name)||"generator"===Zt(e.attributes.name)||"framework"===Zt(e.attributes.name)||"publisher"===Zt(e.attributes.name)||"progid"===Zt(e.attributes.name)||Zt(e.attributes.property).match(/^article:/)||Zt(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===Zt(e.attributes.name)||"yandex-verification"===Zt(e.attributes.name)||"csrf-token"===Zt(e.attributes.name)||"p:domain_verify"===Zt(e.attributes.name)||"verify-v1"===Zt(e.attributes.name)||"verification"===Zt(e.attributes.name)||"shopify-checkout-api-token"===Zt(e.attributes.name)))return!0}}return!1}(Z,v)&&(O||Z.type!==We.Text||Z.isStyle||Z.textContent.replace(/^\s+|\s+$/gm,"").length)?wt():-2;var D=Object.assign(Z,{id:n});if(o.add(e,D),-2===n)return null;k&&k(e);var G=!u;if(D.type===We.Element){G=G&&!D.needBlock,delete D.needBlock;var B=e.shadowRoot;B&&mt(B)&&(D.isShadowHost=!0)}if((D.type===We.Document||D.type===We.Element)&&G){v.headWhitespace&&D.type===We.Element&&"head"===D.tagName&&(O=!1);for(var Y={doc:r,mirror:o,blockClass:i,blockSelector:a,maskTextClass:s,maskTextSelector:c,skipChild:u,inlineStylesheet:h,maskInputOptions:p,maskTextFn:g,maskInputFn:f,slimDOMOptions:v,dataURLOptions:I,inlineImages:b,recordCanvas:w,preserveWhiteSpace:O,onSerialize:k,onIframeLoad:A,iframeLoadTimeout:L,onStylesheetLoad:R,stylesheetLoadTimeout:N,keepIframeSrcFn:E},X=0,J=Array.from(e.childNodes);X<J.length;X++){(_=Dt(J[X],Y))&&D.childNodes.push(_)}if(function(e){return e.nodeType===e.ELEMENT_NODE}(e)&&e.shadowRoot)for(var j=0,U=Array.from(e.shadowRoot.childNodes);j<U.length;j++){var _;(_=Dt(U[j],Y))&&(mt(e.shadowRoot)&&(_.isShadow=!0),D.childNodes.push(_))}}return e.parentNode&&ht(e.parentNode)&&mt(e.parentNode)&&(D.isShadow=!0),D.type===We.Element&&"iframe"===D.tagName&&function(e,t,n){var r=e.contentWindow;if(r){var o,i=!1;try{o=r.document.readyState}catch(e){return}if("complete"===o){var a="about:blank";if(r.location.href!==a||e.src===a||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}else{var s=setTimeout((function(){i||(t(),i=!0)}),n);e.addEventListener("load",(function(){clearTimeout(s),i=!0,t()}))}}}(e,(function(){var t=e.contentDocument;if(t&&A){var n=Dt(t,{doc:t,mirror:o,blockClass:i,blockSelector:a,maskTextClass:s,maskTextSelector:c,skipChild:!1,inlineStylesheet:h,maskInputOptions:p,maskTextFn:g,maskInputFn:f,slimDOMOptions:v,dataURLOptions:I,inlineImages:b,recordCanvas:w,preserveWhiteSpace:O,onSerialize:k,onIframeLoad:A,iframeLoadTimeout:L,onStylesheetLoad:R,stylesheetLoadTimeout:N,keepIframeSrcFn:E});n&&A(e,n)}}),L),D.type===We.Element&&"link"===D.tagName&&"stylesheet"===D.attributes.rel&&function(e,t,n){var r,o=!1;try{r=e.sheet}catch(e){return}if(!r){var i=setTimeout((function(){o||(t(),o=!0)}),n);e.addEventListener("load",(function(){clearTimeout(i),o=!0,t()}))}}(e,(function(){if(R){var t=Dt(e,{doc:r,mirror:o,blockClass:i,blockSelector:a,maskTextClass:s,maskTextSelector:c,skipChild:!1,inlineStylesheet:h,maskInputOptions:p,maskTextFn:g,maskInputFn:f,slimDOMOptions:v,dataURLOptions:I,inlineImages:b,recordCanvas:w,preserveWhiteSpace:O,onSerialize:k,onIframeLoad:A,iframeLoadTimeout:L,onStylesheetLoad:R,stylesheetLoadTimeout:N,keepIframeSrcFn:E});t&&R(e,t)}}),N),D}function Gt(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const Bt="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let Yt={map:{},getId:()=>(console.error(Bt),-1),getNode:()=>(console.error(Bt),null),removeNodeFromMap(){console.error(Bt)},has:()=>(console.error(Bt),!1),reset(){console.error(Bt)}};function Xt(e,t,n={}){let r=null,o=0;return function(...i){const a=Date.now();o||!1!==n.leading||(o=a);const s=t-(a-o),c=this;s<=0||s>t?(r&&(clearTimeout(r),r=null),o=a,e.apply(c,i)):r||!1===n.trailing||(r=setTimeout((()=>{o=!1===n.leading?0:Date.now(),r=null,e.apply(c,i)}),s))}}function Jt(e,t,n,r,o=window){const i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(e){setTimeout((()=>{n.set.call(this,e)}),0),i&&i.set&&i.set.call(this,e)}}),()=>Jt(e,t,i||{},!0)}function jt(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch(e){return()=>{}}}function Ut(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function _t(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Pt(e,t,n,r){if(!e)return!1;const o=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(!o)return!1;if("string"==typeof t){if(o.classList.contains(t))return!0;if(r&&null!==o.closest("."+t))return!0}else if(Vt(o,t,r))return!0;if(n){if(e.matches(n))return!0;if(r&&null!==o.closest(n))return!0}return!1}function Ht(e,t){return-2===t.getId(e)}function zt(e,t){if(ht(e))return!1;const n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||zt(e.parentNode,t))}function Kt(e){return Boolean(e.changedTouches)}function Qt(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function qt(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function $t(e){return Boolean(null==e?void 0:e.shadowRoot)}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(Yt=new Proxy(Yt,{get:(e,t,n)=>("map"===t&&console.error(Bt),Reflect.get(e,t,n))}));class en{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){var t;return null!==(t=this.styleIDMap.get(e))&&void 0!==t?t:-1}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}var tn=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(tn||{}),nn=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e))(nn||{}),rn=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(rn||{}),on=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(on||{});function an(e){return"__ln"in e}class sn{constructor(){this.length=0,this.head=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let n=0;n<e;n++)t=(null==t?void 0:t.next)||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&an(e.previousSibling)){const n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&an(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next&&(t.next.previous=t.previous)):(this.head=t.next,this.head&&(this.head.previous=null)),e.__ln&&delete e.__ln,this.length--)}}const cn=(e,t)=>`${e}@${t}`;class ln{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],t=new sn,n=e=>{let t=e,n=-2;for(;-2===n;)t=t&&t.nextSibling,n=t&&this.mirror.getId(t);return n},r=r=>{var o,i,a,s;let c=null;(null===(i=null===(o=r.getRootNode)||void 0===o?void 0:o.call(r))||void 0===i?void 0:i.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&r.getRootNode().host&&(c=r.getRootNode().host);let l=c;for(;(null===(s=null===(a=null==l?void 0:l.getRootNode)||void 0===a?void 0:a.call(l))||void 0===s?void 0:s.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&l.getRootNode().host;)l=l.getRootNode().host;const u=!(this.doc.contains(r)||l&&this.doc.contains(l));if(!r.parentNode||u)return;const d=ht(r.parentNode)?this.mirror.getId(c):this.mirror.getId(r.parentNode),h=n(r);if(-1===d||-1===h)return t.addNode(r);const m=Dt(r,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{Qt(e,this.mirror)&&this.iframeManager.addIframe(e),qt(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),$t(r)&&this.shadowDomManager.addShadowRoot(r.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{this.iframeManager.attachIframe(e,t),this.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)}});m&&e.push({parentId:d,nextId:h,node:m})};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const e of Array.from(this.movedSet.values()))dn(this.removes,e,this.mirror)&&!this.movedSet.has(e.parentNode)||r(e);for(const e of Array.from(this.addedSet.values()))mn(this.droppedSet,e)||dn(this.removes,e,this.mirror)?mn(this.movedSet,e)?r(e):this.droppedSet.add(e):r(e);let o=null;for(;t.length;){let e=null;if(o){const t=this.mirror.getId(o.value.parentNode),r=n(o.value);-1!==t&&-1!==r&&(e=o)}if(!e)for(let r=t.length-1;r>=0;r--){const o=t.get(r);if(o){const t=this.mirror.getId(o.value.parentNode);if(-1===n(o.value))continue;if(-1!==t){e=o;break}{const t=o.value;if(t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const n=t.parentNode.host;if(-1!==this.mirror.getId(n)){e=o;break}}}}}if(!e){for(;t.head;)t.removeNode(t.head.value);break}o=e.previous,t.removeNode(e.value),r(e.value)}const i={texts:this.texts.map((e=>({id:this.mirror.getId(e.node),value:e.value}))).filter((e=>this.mirror.has(e.id))),attributes:this.attributes.map((e=>({id:this.mirror.getId(e.node),attributes:e.attributes}))).filter((e=>this.mirror.has(e.id))),removes:this.removes,adds:e};(i.texts.length||i.attributes.length||i.removes.length||i.adds.length)&&(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(i))},this.processMutation=e=>{if(!Ht(e.target,this.mirror))switch(e.type){case"characterData":{const t=e.target.textContent;Pt(e.target,this.blockClass,this.blockSelector,!1)||t===e.oldValue||this.texts.push({value:Wt(e.target,this.maskTextClass,this.maskTextSelector)&&t?this.maskTextFn?this.maskTextFn(t):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const t=e.target;let n=e.target.getAttribute(e.attributeName);if("value"===e.attributeName&&(n=vt({maskInputOptions:this.maskInputOptions,tagName:e.target.tagName,type:e.target.getAttribute("type"),value:n,maskInputFn:this.maskInputFn})),Pt(e.target,this.blockClass,this.blockSelector,!1)||n===e.oldValue)return;let r=this.attributes.find((t=>t.node===e.target));if("IFRAME"===t.tagName&&"src"===e.attributeName&&!this.keepIframeSrcFn(n)){if(t.contentDocument)return;e.attributeName="rr_src"}if(r||(r={node:e.target,attributes:{}},this.attributes.push(r)),"style"===e.attributeName){const n=this.doc.createElement("span");e.oldValue&&n.setAttribute("style",e.oldValue),void 0!==r.attributes.style&&null!==r.attributes.style||(r.attributes.style={});const o=r.attributes.style;for(const e of Array.from(t.style)){const r=t.style.getPropertyValue(e),i=t.style.getPropertyPriority(e);r===n.style.getPropertyValue(e)&&i===n.style.getPropertyPriority(e)||(o[e]=""===i?r:[r,i])}for(const e of Array.from(n.style))""===t.style.getPropertyValue(e)&&(o[e]=!1)}else r.attributes[e.attributeName]=xt(this.doc,t.tagName,e.attributeName,n);break}case"childList":if(Pt(e.target,this.blockClass,this.blockSelector,!0))return;e.addedNodes.forEach((t=>this.genAdds(t,e.target))),e.removedNodes.forEach((t=>{const n=this.mirror.getId(t),r=ht(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);Pt(e.target,this.blockClass,this.blockSelector,!1)||Ht(t,this.mirror)||!function(e,t){return-1!==t.getId(e)}(t,this.mirror)||(this.addedSet.has(t)?(un(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===n||zt(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[cn(n,r)]?un(this.movedSet,t):this.removes.push({parentId:r,id:n,isShadow:!(!ht(e.target)||!mt(e.target))||void 0})),this.mapRemoves.push(t))}))}},this.genAdds=(e,t)=>{if(this.mirror.hasNode(e)){if(Ht(e,this.mirror))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t)),n&&-1!==n&&(this.movedMap[cn(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);Pt(e,this.blockClass,this.blockSelector,!1)||e.childNodes.forEach((e=>this.genAdds(e)))}}init(e){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager"].forEach((t=>{this[t]=e[t]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function un(e,t){e.delete(t),t.childNodes.forEach((t=>un(e,t)))}function dn(e,t,n){return 0!==e.length&&hn(e,t,n)}function hn(e,t,n){const{parentNode:r}=t;if(!r)return!1;const o=n.getId(r);return!!e.some((e=>e.id===o))||hn(e,r,n)}function mn(e,t){return 0!==e.size&&pn(e,t)}function pn(e,t){const{parentNode:n}=t;return!!n&&(!!e.has(n)||pn(e,n))}const gn=[],fn="undefined"!=typeof CSSGroupingRule,vn="undefined"!=typeof CSSMediaRule,yn="undefined"!=typeof CSSSupportsRule,In="undefined"!=typeof CSSConditionRule;function Cn(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0];return e.target}catch(t){return e.target}}function bn(e,t){var n,r;const o=new ln;gn.push(o),o.init(e);let i=window.MutationObserver||window.__rrMutationObserver;const a=null===(r=null===(n=null===window||void 0===window?void 0:window.Zone)||void 0===n?void 0:n.__symbol__)||void 0===r?void 0:r.call(n,"MutationObserver");a&&window[a]&&(i=window[a]);const s=new i(o.processMutations.bind(o));return s.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function Sn({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,sampling:i}){if(!1===i.mouseInteraction)return()=>{};const a=!0===i.mouseInteraction||void 0===i.mouseInteraction?{}:i.mouseInteraction,s=[];return Object.keys(rn).filter((e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==a[e])).forEach((i=>{const a=i.toLowerCase(),c=(t=>i=>{const a=Cn(i);if(Pt(a,r,o,!0))return;const s=Kt(i)?i.changedTouches[0]:i;if(!s)return;const c=n.getId(a),{clientX:l,clientY:u}=s;e({type:rn[t],id:c,x:l,y:u})})(i);s.push(Gt(a,c,t))})),()=>{s.forEach((e=>e()))}}function wn({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,sampling:i}){return Gt("scroll",Xt((i=>{const a=Cn(i);if(!a||Pt(a,r,o,!0))return;const s=n.getId(a);if(a===t){const n=t.scrollingElement||t.documentElement;e({id:s,x:n.scrollLeft,y:n.scrollTop})}else e({id:s,x:a.scrollLeft,y:a.scrollTop})}),i.scroll||100),t)}function kn(e,t){const n=Object.assign({},e);return t||delete n.userTriggered,n}const An=["INPUT","TEXTAREA","SELECT"],Mn=new WeakMap;function Ln(e){return function(e,t){if(fn&&e.parentRule instanceof CSSGroupingRule||vn&&e.parentRule instanceof CSSMediaRule||yn&&e.parentRule instanceof CSSSupportsRule||In&&e.parentRule instanceof CSSConditionRule){const n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else if(e.parentStyleSheet){const n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function Rn(e,t,n){let r,o;return e?(e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:r}):{}}function Tn({mirror:e,stylesheetManager:t},n){var r,o,i;let a=null;a="#document"===n.nodeName?e.getId(n):e.getId(n.host);const s="#document"===n.nodeName?null===(r=n.defaultView)||void 0===r?void 0:r.Document:null===(i=null===(o=n.ownerDocument)||void 0===o?void 0:o.defaultView)||void 0===i?void 0:i.ShadowRoot,c=Object.getOwnPropertyDescriptor(null==s?void 0:s.prototype,"adoptedStyleSheets");return null!==a&&-1!==a&&s&&c?(Object.defineProperty(n,"adoptedStyleSheets",{configurable:c.configurable,enumerable:c.enumerable,get(){var e;return null===(e=c.get)||void 0===e?void 0:e.call(this)},set(e){var n;const r=null===(n=c.set)||void 0===n?void 0:n.call(this,e);if(null!==a&&-1!==a)try{t.adoptStyleSheets(e,a)}catch(e){}return r}}),()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:c.configurable,enumerable:c.enumerable,get:c.get,set:c.set})}):()=>{}}function Nn(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};!function(e,t){const{mutationCb:n,mousemoveCb:r,mouseInteractionCb:o,scrollCb:i,viewportResizeCb:a,inputCb:s,mediaInteractionCb:c,styleSheetRuleCb:l,styleDeclarationCb:u,canvasMutationCb:d,fontCb:h,selectionCb:m}=e;e.mutationCb=(...e)=>{t.mutation&&t.mutation(...e),n(...e)},e.mousemoveCb=(...e)=>{t.mousemove&&t.mousemove(...e),r(...e)},e.mouseInteractionCb=(...e)=>{t.mouseInteraction&&t.mouseInteraction(...e),o(...e)},e.scrollCb=(...e)=>{t.scroll&&t.scroll(...e),i(...e)},e.viewportResizeCb=(...e)=>{t.viewportResize&&t.viewportResize(...e),a(...e)},e.inputCb=(...e)=>{t.input&&t.input(...e),s(...e)},e.mediaInteractionCb=(...e)=>{t.mediaInteaction&&t.mediaInteaction(...e),c(...e)},e.styleSheetRuleCb=(...e)=>{t.styleSheetRule&&t.styleSheetRule(...e),l(...e)},e.styleDeclarationCb=(...e)=>{t.styleDeclaration&&t.styleDeclaration(...e),u(...e)},e.canvasMutationCb=(...e)=>{t.canvasMutation&&t.canvasMutation(...e),d(...e)},e.fontCb=(...e)=>{t.font&&t.font(...e),h(...e)},e.selectionCb=(...e)=>{t.selection&&t.selection(...e),m(...e)}}(e,t);const r=bn(e,e.doc),o=function({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(!1===t.mousemove)return()=>{};const o="number"==typeof t.mousemove?t.mousemove:50,i="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500;let a,s=[];const c=Xt((t=>{const n=Date.now()-a;e(s.map((e=>(e.timeOffset-=n,e))),t),s=[],a=null}),i),l=Xt((e=>{const t=Cn(e),{clientX:n,clientY:o}=Kt(e)?e.changedTouches[0]:e;a||(a=Date.now()),s.push({x:n,y:o,id:r.getId(t),timeOffset:Date.now()-a}),c("undefined"!=typeof DragEvent&&e instanceof DragEvent?nn.Drag:e instanceof MouseEvent?nn.MouseMove:nn.TouchMove)}),o,{trailing:!1}),u=[Gt("mousemove",l,n),Gt("touchmove",l,n),Gt("drag",l,n)];return()=>{u.forEach((e=>e()))}}(e),i=Sn(e),a=wn(e),s=function({viewportResizeCb:e}){let t=-1,n=-1;return Gt("resize",Xt((()=>{const r=Ut(),o=_t();t===r&&n===o||(e({width:Number(o),height:Number(r)}),t=r,n=o)}),200),window)}(e),c=function({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,ignoreClass:i,maskInputOptions:a,maskInputFn:s,sampling:c,userTriggeredOnInput:l}){function u(e){let n=Cn(e);const c=e.isTrusted;if(n&&"OPTION"===n.tagName&&(n=n.parentElement),!n||!n.tagName||An.indexOf(n.tagName)<0||Pt(n,r,o,!0))return;const u=n.type;if(n.classList.contains(i))return;let h=n.value,m=!1;"radio"===u||"checkbox"===u?m=n.checked:(a[n.tagName.toLowerCase()]||a[u])&&(h=vt({maskInputOptions:a,tagName:n.tagName,type:u,value:h,maskInputFn:s})),d(n,kn({text:h,isChecked:m,userTriggered:c},l));const p=n.name;"radio"===u&&p&&m&&t.querySelectorAll(`input[type="radio"][name="${p}"]`).forEach((e=>{e!==n&&d(e,kn({text:e.value,isChecked:!m,userTriggered:!1},l))}))}function d(t,r){const o=Mn.get(t);if(!o||o.text!==r.text||o.isChecked!==r.isChecked){Mn.set(t,r);const o=n.getId(t);e(Object.assign(Object.assign({},r),{id:o}))}}const h=("last"===c.input?["change"]:["input","change"]).map((e=>Gt(e,u,t))),m=t.defaultView;if(!m)return()=>{h.forEach((e=>e()))};const p=m.Object.getOwnPropertyDescriptor(m.HTMLInputElement.prototype,"value"),g=[[m.HTMLInputElement.prototype,"value"],[m.HTMLInputElement.prototype,"checked"],[m.HTMLSelectElement.prototype,"value"],[m.HTMLTextAreaElement.prototype,"value"],[m.HTMLSelectElement.prototype,"selectedIndex"],[m.HTMLOptionElement.prototype,"selected"]];return p&&p.set&&h.push(...g.map((e=>Jt(e[0],e[1],{set(){u({target:this})}},!1,m)))),()=>{h.forEach((e=>e()))}}(e),l=function({mediaInteractionCb:e,blockClass:t,blockSelector:n,mirror:r,sampling:o}){const i=i=>Xt((o=>{const a=Cn(o);if(!a||Pt(a,t,n,!0))return;const{currentTime:s,volume:c,muted:l,playbackRate:u}=a;e({type:i,id:r.getId(a),currentTime:s,volume:c,muted:l,playbackRate:u})}),o.media||500),a=[Gt("play",i(0)),Gt("pause",i(1)),Gt("seeked",i(2)),Gt("volumechange",i(3)),Gt("ratechange",i(4))];return()=>{a.forEach((e=>e()))}}(e),u=function({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){const o=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=function(r,i){const{id:a,styleId:s}=Rn(this,t,n.styleMirror);return(a&&-1!==a||s&&-1!==s)&&e({id:a,styleId:s,adds:[{rule:r,index:i}]}),o.apply(this,[r,i])};const i=r.CSSStyleSheet.prototype.deleteRule;let a,s;r.CSSStyleSheet.prototype.deleteRule=function(r){const{id:o,styleId:a}=Rn(this,t,n.styleMirror);return(o&&-1!==o||a&&-1!==a)&&e({id:o,styleId:a,removes:[{index:r}]}),i.apply(this,[r])},r.CSSStyleSheet.prototype.replace&&(a=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=function(r){const{id:o,styleId:i}=Rn(this,t,n.styleMirror);return(o&&-1!==o||i&&-1!==i)&&e({id:o,styleId:i,replace:r}),a.apply(this,[r])}),r.CSSStyleSheet.prototype.replaceSync&&(s=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=function(r){const{id:o,styleId:i}=Rn(this,t,n.styleMirror);return(o&&-1!==o||i&&-1!==i)&&e({id:o,styleId:i,replaceSync:r}),s.apply(this,[r])});const c={};fn?c.CSSGroupingRule=r.CSSGroupingRule:(vn&&(c.CSSMediaRule=r.CSSMediaRule),In&&(c.CSSConditionRule=r.CSSConditionRule),yn&&(c.CSSSupportsRule=r.CSSSupportsRule));const l={};return Object.entries(c).forEach((([r,o])=>{l[r]={insertRule:o.prototype.insertRule,deleteRule:o.prototype.deleteRule},o.prototype.insertRule=function(o,i){const{id:a,styleId:s}=Rn(this.parentStyleSheet,t,n.styleMirror);return(a&&-1!==a||s&&-1!==s)&&e({id:a,styleId:s,adds:[{rule:o,index:[...Ln(this),i||0]}]}),l[r].insertRule.apply(this,[o,i])},o.prototype.deleteRule=function(o){const{id:i,styleId:a}=Rn(this.parentStyleSheet,t,n.styleMirror);return(i&&-1!==i||a&&-1!==a)&&e({id:i,styleId:a,removes:[{index:[...Ln(this),o]}]}),l[r].deleteRule.apply(this,[o])}})),()=>{r.CSSStyleSheet.prototype.insertRule=o,r.CSSStyleSheet.prototype.deleteRule=i,a&&(r.CSSStyleSheet.prototype.replace=a),s&&(r.CSSStyleSheet.prototype.replaceSync=s),Object.entries(c).forEach((([e,t])=>{t.prototype.insertRule=l[e].insertRule,t.prototype.deleteRule=l[e].deleteRule}))}}(e,{win:n}),d=Tn(e,e.doc),h=function({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:o}){const i=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=function(o,a,s){var c;if(n.has(o))return i.apply(this,[o,a,s]);const{id:l,styleId:u}=Rn(null===(c=this.parentRule)||void 0===c?void 0:c.parentStyleSheet,t,r.styleMirror);return(l&&-1!==l||u&&-1!==u)&&e({id:l,styleId:u,set:{property:o,value:a,priority:s},index:Ln(this.parentRule)}),i.apply(this,[o,a,s])};const a=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=function(o){var i;if(n.has(o))return a.apply(this,[o]);const{id:s,styleId:c}=Rn(null===(i=this.parentRule)||void 0===i?void 0:i.parentStyleSheet,t,r.styleMirror);return(s&&-1!==s||c&&-1!==c)&&e({id:s,styleId:c,remove:{property:o},index:Ln(this.parentRule)}),a.apply(this,[o])},()=>{o.CSSStyleDeclaration.prototype.setProperty=i,o.CSSStyleDeclaration.prototype.removeProperty=a}}(e,{win:n}),m=e.collectFonts?function({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],o=new WeakMap,i=n.FontFace;n.FontFace=function(e,t,n){const r=new i(e,t,n);return o.set(r,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r};const a=jt(t.fonts,"add",(function(t){return function(n){return setTimeout((()=>{const t=o.get(n);t&&(e(t),o.delete(n))}),0),t.apply(this,[n])}}));return r.push((()=>{n.FontFace=i})),r.push(a),()=>{r.forEach((e=>e()))}}(e):()=>{},p=function(e){const{doc:t,mirror:n,blockClass:r,blockSelector:o,selectionCb:i}=e;let a=!0;const s=()=>{const e=t.getSelection();if(!e||a&&(null==e?void 0:e.isCollapsed))return;a=e.isCollapsed||!1;const s=[],c=e.rangeCount||0;for(let t=0;t<c;t++){const i=e.getRangeAt(t),{startContainer:a,startOffset:c,endContainer:l,endOffset:u}=i;Pt(a,r,o,!0)||Pt(l,r,o,!0)||s.push({start:n.getId(a),startOffset:c,end:n.getId(l),endOffset:u})}i({ranges:s})};return s(),Gt("selectionchange",s)}(e),g=[];for(const t of e.plugins)g.push(t.observer(t.callback,n,t.options));return()=>{gn.forEach((e=>e.reset())),r.disconnect(),o(),i(),a(),s(),c(),l(),u(),d(),h(),m(),p(),g.forEach((e=>e()))}}class Fn{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,n,r){const o=n||this.getIdToRemoteIdMap(e),i=r||this.getRemoteIdToIdMap(e);let a=o.get(t);return a||(a=this.generateIdFn(),o.set(t,a),i.set(a,t)),a}getIds(e,t){const n=this.getIdToRemoteIdMap(e),r=this.getRemoteIdToIdMap(e);return t.map((t=>this.getId(e,t,n,r)))}getRemoteId(e,t,n){const r=n||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;const o=r.get(t);return o||-1}getRemoteIds(e,t){const n=this.getRemoteIdToIdMap(e);return t.map((t=>this.getRemoteId(e,t,n)))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}class En{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new Fn(wt),this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Fn(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){var n;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),null===(n=this.loadListener)||void 0===n||n.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){if("rrweb"===e.data.type){if(!e.source)return;const t=this.crossOriginIframeMap.get(e.source);if(!t)return;const n=this.transformCrossOriginEvent(t,e.data.event);n&&this.wrappedEmit(n,e.data.isCheckout)}}transformCrossOriginEvent(e,t){var n;switch(t.type){case tn.FullSnapshot:return this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e),{timestamp:t.timestamp,type:tn.IncrementalSnapshot,data:{source:nn.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}};case tn.Meta:case tn.Load:case tn.DomContentLoaded:return!1;case tn.Plugin:return t;case tn.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case tn.IncrementalSnapshot:switch(t.data.source){case nn.Mutation:return t.data.adds.forEach((t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e)})),t.data.removes.forEach((t=>{this.replaceIds(t,e,["parentId","id"])})),t.data.attributes.forEach((t=>{this.replaceIds(t,e,["id"])})),t.data.texts.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case nn.Drag:case nn.TouchMove:case nn.MouseMove:return t.data.positions.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case nn.ViewportResize:return!1;case nn.MediaInteraction:case nn.MouseInteraction:case nn.Scroll:case nn.CanvasMutation:case nn.Input:return this.replaceIds(t.data,e,["id"]),t;case nn.StyleSheetRule:case nn.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case nn.Font:return t;case nn.Selection:return t.data.ranges.forEach((t=>{this.replaceIds(t,e,["start","end"])})),t;case nn.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),null===(n=t.data.styles)||void 0===n||n.forEach((t=>{this.replaceStyleIds(t,e,["styleId"])})),t}}}replace(e,t,n,r){for(const o of r)(Array.isArray(t[o])||"number"==typeof t[o])&&(Array.isArray(t[o])?t[o]=e.getIds(n,t[o]):t[o]=e.getId(n,t[o]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id"]),"childNodes"in e&&e.childNodes.forEach((e=>{this.replaceIdOnNode(e,t)}))}}class xn{constructor(e){this.shadowDoms=new WeakSet,this.restorePatches=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror;const t=this;this.restorePatches.push(jt(Element.prototype,"attachShadow",(function(e){return function(n){const r=e.call(this,n);return this.shadowRoot&&t.addShadowRoot(this.shadowRoot,this.ownerDocument),r}})))}addShadowRoot(e,t){mt(e)&&(this.shadowDoms.has(e)||(this.shadowDoms.add(e),bn(Object.assign(Object.assign({},this.bypassOptions),{doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e),wn(Object.assign(Object.assign({},this.bypassOptions),{scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),setTimeout((()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),Tn({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e)}),0)))}observeAttachShadow(e){if(e.contentWindow){const t=this;this.restorePatches.push(jt(e.contentWindow.HTMLElement.prototype,"attachShadow",(function(n){return function(r){const o=n.call(this,r);return this.shadowRoot&&t.addShadowRoot(this.shadowRoot,e.contentDocument),o}})))}}reset(){this.restorePatches.forEach((e=>e())),this.shadowDoms=new WeakSet}}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Vn(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}for(var Wn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",On="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Zn=0;Zn<Wn.length;Zn++)On[Wn.charCodeAt(Zn)]=Zn;const Dn=new Map;const Gn=(e,t,n)=>{if(!e||!Xn(e,t)&&"object"!=typeof e)return;const r=function(e,t){let n=Dn.get(e);return n||(n=new Map,Dn.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(n,e.constructor.name);let o=r.indexOf(e);return-1===o&&(o=r.length,r.push(e)),o};function Bn(e,t,n){if(e instanceof Array)return e.map((e=>Bn(e,t,n)));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray){return{rr_type:e.constructor.name,args:[Object.values(e)]}}if(e instanceof ArrayBuffer){const t=e.constructor.name,n=function(e){var t,n=new Uint8Array(e),r=n.length,o="";for(t=0;t<r;t+=3)o+=Wn[n[t]>>2],o+=Wn[(3&n[t])<<4|n[t+1]>>4],o+=Wn[(15&n[t+1])<<2|n[t+2]>>6],o+=Wn[63&n[t+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o}(e);return{rr_type:t,base64:n}}if(e instanceof DataView){return{rr_type:e.constructor.name,args:[Bn(e.buffer,t,n),e.byteOffset,e.byteLength]}}if(e instanceof HTMLImageElement){const t=e.constructor.name,{src:n}=e;return{rr_type:t,src:n}}if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}if(e instanceof ImageData){return{rr_type:e.constructor.name,args:[Bn(e.data,t,n),e.width,e.height]}}if(Xn(e,t)||"object"==typeof e){return{rr_type:e.constructor.name,index:Gn(e,t,n)}}return e}const Yn=(e,t,n)=>[...e].map((e=>Bn(e,t,n))),Xn=(e,t)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((e=>"function"==typeof t[e]));return Boolean(n.find((n=>e instanceof t[n])))};function Jn(e,t,n){const r=[];try{const o=jt(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(r,...o){return Pt(this,t,n,!0)||"__context"in this||(this.__context=r),e.apply(this,[r,...o])}}));r.push(o)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{r.forEach((e=>e()))}}function jn(e,t,n,r,o,i,a){const s=[],c=Object.getOwnPropertyNames(e);for(const i of c)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(i))try{if("function"!=typeof e[i])continue;const c=jt(e,i,(function(e){return function(...s){const c=e.apply(this,s);if(Gn(c,a,this),!Pt(this.canvas,r,o,!0)){const e=Yn([...s],a,this),r={type:t,property:i,args:e};n(this.canvas,r)}return c}}));s.push(c)}catch(r){const o=Jt(e,i,{set(e){n(this.canvas,{type:t,property:i,args:[e],setter:!0})}});s.push(o)}return s}var Un=null;try{var _n="undefined"!=typeof module&&"function"==typeof module.require&&module.require("worker_threads")||"function"==typeof __non_webpack_require__&&__non_webpack_require__("worker_threads")||"function"==typeof require&&require("worker_threads");Un=_n.Worker}catch(Fe){}function Pn(e,t,n){var r=void 0===t?null:t,o=function(e,t){return Buffer.from(e,"base64").toString(t?"utf16":"utf8")}(e,void 0!==n&&n),i=o.indexOf("\n",10)+1,a=o.substring(i)+(r?"//# sourceMappingURL="+r:"");return function(e){return new Un(a,Object.assign({},e,{eval:!0}))}}function Hn(e,t,n){var r=void 0===t?null:t,o=function(e,t){var n=atob(e);if(t){for(var r=new Uint8Array(n.length),o=0,i=n.length;o<i;++o)r[o]=n.charCodeAt(o);return String.fromCharCode.apply(null,new Uint16Array(r.buffer))}return n}(e,void 0!==n&&n),i=o.indexOf("\n",10)+1,a=o.substring(i)+(r?"//# sourceMappingURL="+r:""),s=new Blob([a],{type:"application/javascript"});return URL.createObjectURL(s)}var zn="[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0);var Kn,Qn,qn,$n=(Kn="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIC8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLg0KDQogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55DQogICAgcHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLg0KDQogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgNCiAgICBSRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkNCiAgICBBTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsDQogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NDQogICAgTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1INCiAgICBPVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SDQogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4NCiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqLw0KDQogICAgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikgew0KICAgICAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH0NCiAgICAgICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvclsidGhyb3ciXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQ0KICAgICAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpOw0KICAgICAgICB9KTsNCiAgICB9CgogICAgLyoKICAgICAqIGJhc2U2NC1hcnJheWJ1ZmZlciAxLjAuMSA8aHR0cHM6Ly9naXRodWIuY29tL25pa2xhc3ZoL2Jhc2U2NC1hcnJheWJ1ZmZlcj4KICAgICAqIENvcHlyaWdodCAoYykgMjAyMSBOaWtsYXMgdm9uIEhlcnR6ZW4gPGh0dHBzOi8vaGVydHplbi5jb20+CiAgICAgKiBSZWxlYXNlZCB1bmRlciBNSVQgTGljZW5zZQogICAgICovCiAgICB2YXIgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7CiAgICAvLyBVc2UgYSBsb29rdXAgdGFibGUgdG8gZmluZCB0aGUgaW5kZXguCiAgICB2YXIgbG9va3VwID0gdHlwZW9mIFVpbnQ4QXJyYXkgPT09ICd1bmRlZmluZWQnID8gW10gOiBuZXcgVWludDhBcnJheSgyNTYpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykgewogICAgICAgIGxvb2t1cFtjaGFycy5jaGFyQ29kZUF0KGkpXSA9IGk7CiAgICB9CiAgICB2YXIgZW5jb2RlID0gZnVuY3Rpb24gKGFycmF5YnVmZmVyKSB7CiAgICAgICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpLCBpLCBsZW4gPSBieXRlcy5sZW5ndGgsIGJhc2U2NCA9ICcnOwogICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMykgewogICAgICAgICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaV0gPj4gMl07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2ldICYgMykgPDwgNCkgfCAoYnl0ZXNbaSArIDFdID4+IDQpXTsKICAgICAgICAgICAgYmFzZTY0ICs9IGNoYXJzWygoYnl0ZXNbaSArIDFdICYgMTUpIDw8IDIpIHwgKGJ5dGVzW2kgKyAyXSA+PiA2KV07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1tieXRlc1tpICsgMl0gJiA2M107CiAgICAgICAgfQogICAgICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgJz0nOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgJz09JzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJhc2U2NDsKICAgIH07CgogICAgY29uc3QgbGFzdEJsb2JNYXAgPSBuZXcgTWFwKCk7DQogICAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gbmV3IE1hcCgpOw0KICAgIGZ1bmN0aW9uIGdldFRyYW5zcGFyZW50QmxvYkZvcih3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucykgew0KICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgew0KICAgICAgICAgICAgY29uc3QgaWQgPSBgJHt3aWR0aH0tJHtoZWlnaHR9YDsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgaWYgKHRyYW5zcGFyZW50QmxvYk1hcC5oYXMoaWQpKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNwYXJlbnRCbG9iTWFwLmdldChpZCk7DQogICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsNCiAgICAgICAgICAgICAgICBvZmZzY3JlZW4uZ2V0Q29udGV4dCgnMmQnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0geWllbGQgYmxvYi5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7DQogICAgICAgICAgICAgICAgdHJhbnNwYXJlbnRCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZTY0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQogICAgY29uc3Qgd29ya2VyID0gc2VsZjsNCiAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgY29uc3QgeyBpZCwgYml0bWFwLCB3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucyB9ID0gZS5kYXRhOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zKTsNCiAgICAgICAgICAgICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IG9mZnNjcmVlbi5nZXRDb250ZXh0KCcyZCcpOw0KICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoYml0bWFwLCAwLCAwKTsNCiAgICAgICAgICAgICAgICBiaXRtYXAuY2xvc2UoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBibG9iLnR5cGU7DQogICAgICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSB5aWVsZCBibG9iLmFycmF5QnVmZmVyKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlKGFycmF5QnVmZmVyKTsNCiAgICAgICAgICAgICAgICBpZiAoIWxhc3RCbG9iTWFwLmhhcyhpZCkgJiYgKHlpZWxkIHRyYW5zcGFyZW50QmFzZTY0KSA9PT0gYmFzZTY0KSB7DQogICAgICAgICAgICAgICAgICAgIGxhc3RCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7DQogICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgICAgaWQsDQogICAgICAgICAgICAgICAgICAgIHR5cGUsDQogICAgICAgICAgICAgICAgICAgIGJhc2U2NCwNCiAgICAgICAgICAgICAgICAgICAgd2lkdGgsDQogICAgICAgICAgICAgICAgICAgIGhlaWdodCwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfTsKCn0pKCk7Cgo=",Qn=null,qn=!1,zn?Pn(Kn,Qn,qn):function(e,t,n){var r;return function(o){return r=r||Hn(e,t,n),new Worker(r,o)}}(Kn,Qn,qn));class er{constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(e,t)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)};const{sampling:t="all",win:n,blockClass:r,blockSelector:o,recordCanvas:i,dataURLOptions:a}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,i&&"all"===t&&this.initCanvasMutationObserver(n,r,o),i&&"number"==typeof t&&this.initCanvasFPSObserver(t,n,r,o,{dataURLOptions:a})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(e,t,n,r,o){const i=Jn(t,n,r),a=new Map,s=new $n;s.onmessage=e=>{const{id:t}=e.data;if(a.set(t,!1),!("base64"in e.data))return;const{base64:n,type:r,width:o,height:i}=e.data;this.mutationCb({id:t,type:on["2D"],commands:[{property:"clearRect",args:[0,0,o,i]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:n}],type:r}]},0,0]}]})};const c=1e3/e;let l,u=0;const d=e=>{u&&e-u<c||(u=e,(()=>{const e=[];return t.document.querySelectorAll("canvas").forEach((t=>{Pt(t,n,r,!0)||e.push(t)})),e})().forEach((e=>Vn(this,void 0,void 0,(function*(){var t;const n=this.mirror.getId(e);if(a.get(n))return;if(a.set(n,!0),["webgl","webgl2"].includes(e.__context)){const n=e.getContext(e.__context);!1===(null===(t=null==n?void 0:n.getContextAttributes())||void 0===t?void 0:t.preserveDrawingBuffer)&&(null==n||n.clear(n.COLOR_BUFFER_BIT))}const r=yield createImageBitmap(e);s.postMessage({id:n,bitmap:r,width:e.width,height:e.height,dataURLOptions:o.dataURLOptions},[r])}))))),l=requestAnimationFrame(d)};l=requestAnimationFrame(d),this.resetObservers=()=>{i(),cancelAnimationFrame(l)}}initCanvasMutationObserver(e,t,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const r=Jn(e,t,n),o=function(e,t,n,r){const o=[],i=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const a of i)try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[a])continue;const i=jt(t.CanvasRenderingContext2D.prototype,a,(function(o){return function(...i){return Pt(this.canvas,n,r,!0)||setTimeout((()=>{const n=Yn([...i],t,this);e(this.canvas,{type:on["2D"],property:a,args:n})}),0),o.apply(this,i)}}));o.push(i)}catch(n){const r=Jt(t.CanvasRenderingContext2D.prototype,a,{set(t){e(this.canvas,{type:on["2D"],property:a,args:[t],setter:!0})}});o.push(r)}return()=>{o.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n),i=function(e,t,n,r,o){const i=[];return i.push(...jn(t.WebGLRenderingContext.prototype,on.WebGL,e,n,r,0,t)),void 0!==t.WebGL2RenderingContext&&i.push(...jn(t.WebGL2RenderingContext.prototype,on.WebGL2,e,n,r,0,t)),()=>{i.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,this.mirror);this.resetObservers=()=>{r(),o(),i()}}startPendingCanvasMutationFlusher(){requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,requestAnimationFrame(e)};requestAnimationFrame(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((e,t)=>{const n=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,n)})),requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(e);if(!n||-1===t)return;const r=n.map((e=>{const t=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["type"]);return t})),{type:o}=n[0];this.mutationCb({id:t,type:o,commands:r}),this.pendingCanvasMutations.delete(e)}}class tr{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new en,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const n={id:t,styleIds:[]},r=[];for(const t of e){let e;if(this.styleMirror.has(t))e=this.styleMirror.getId(t);else{e=this.styleMirror.add(t);const n=Array.from(t.rules||CSSRule);r.push({styleId:e,rules:n.map(((e,t)=>({rule:gt(e),index:t})))})}n.styleIds.push(e)}r.length>0&&(n.styles=r),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}function nr(e){return Object.assign(Object.assign({},e),{timestamp:Date.now()})}let rr,or,ir,ar=!1;const sr=new ft;function cr(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:i=null,ignoreClass:a="rr-ignore",maskTextClass:s="rr-mask",maskTextSelector:c=null,inlineStylesheet:l=!0,maskAllInputs:u,maskInputOptions:d,slimDOMOptions:h,maskInputFn:m,maskTextFn:p,hooks:g,packFn:f,sampling:v={},dataURLOptions:y={},mousemoveWait:I,recordCanvas:C=!1,recordCrossOriginIframes:b=!1,userTriggeredOnInput:S=!1,collectFonts:w=!1,inlineImages:k=!1,plugins:A,keepIframeSrcFn:M=(()=>!1),ignoreCSSAttributes:L=new Set([])}=e,R=!b||window.parent===window;let T=!1;if(!R)try{window.parent.document,T=!1}catch(e){T=!0}if(R&&!t)throw new Error("emit function is required");void 0!==I&&void 0===v.mousemove&&(v.mousemove=I),sr.reset();const N=!0===u?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==d?d:{password:!0},F=!0===h||"all"===h?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===h,headMetaDescKeywords:"all"===h}:h||{};let E;!function(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})}();let x=0;const V=e=>{for(const t of A||[])t.eventProcessor&&(e=t.eventProcessor(e));return f&&(e=f(e)),e};rr=(e,o)=>{var i;if(!(null===(i=gn[0])||void 0===i?void 0:i.isFrozen())||e.type===tn.FullSnapshot||e.type===tn.IncrementalSnapshot&&e.data.source===nn.Mutation||gn.forEach((e=>e.unfreeze())),R)null==t||t(V(e),o);else if(T){const t={type:"rrweb",event:V(e),isCheckout:o};window.parent.postMessage(t,"*")}if(e.type===tn.FullSnapshot)E=e,x=0;else if(e.type===tn.IncrementalSnapshot){if(e.data.source===nn.Mutation&&e.data.isAttachIframe)return;x++;const t=r&&x>=r,o=n&&e.timestamp-E.timestamp>n;(t||o)&&or(!0)}};const W=e=>{rr(nr({type:tn.IncrementalSnapshot,data:Object.assign({source:nn.Mutation},e)}))},O=e=>rr(nr({type:tn.IncrementalSnapshot,data:Object.assign({source:nn.Scroll},e)})),Z=e=>rr(nr({type:tn.IncrementalSnapshot,data:Object.assign({source:nn.CanvasMutation},e)})),D=new tr({mutationCb:W,adoptedStyleSheetCb:e=>rr(nr({type:tn.IncrementalSnapshot,data:Object.assign({source:nn.AdoptedStyleSheet},e)}))}),G=new En({mirror:sr,mutationCb:W,stylesheetManager:D,recordCrossOriginIframes:b,wrappedEmit:rr});for(const e of A||[])e.getMirror&&e.getMirror({nodeMirror:sr,crossOriginIframeMirror:G.crossOriginIframeMirror,crossOriginIframeStyleMirror:G.crossOriginIframeStyleMirror});ir=new er({recordCanvas:C,mutationCb:Z,win:window,blockClass:o,blockSelector:i,mirror:sr,sampling:v.canvas,dataURLOptions:y});const B=new xn({mutationCb:W,scrollCb:O,bypassOptions:{blockClass:o,blockSelector:i,maskTextClass:s,maskTextSelector:c,inlineStylesheet:l,maskInputOptions:N,dataURLOptions:y,maskTextFn:p,maskInputFn:m,recordCanvas:C,inlineImages:k,sampling:v,slimDOMOptions:F,iframeManager:G,stylesheetManager:D,canvasManager:ir,keepIframeSrcFn:M},mirror:sr});or=(e=!1)=>{var t,n,r,a,u,d;rr(nr({type:tn.Meta,data:{href:window.location.href,width:_t(),height:Ut()}}),e),D.reset(),gn.forEach((e=>e.lock()));const h=function(e,t){var n=t||{},r=n.mirror,o=void 0===r?new ft:r,i=n.blockClass,a=void 0===i?"rr-block":i,s=n.blockSelector,c=void 0===s?null:s,l=n.maskTextClass,u=void 0===l?"rr-mask":l,d=n.maskTextSelector,h=void 0===d?null:d,m=n.inlineStylesheet,p=void 0===m||m,g=n.inlineImages,f=void 0!==g&&g,v=n.recordCanvas,y=void 0!==v&&v,I=n.maskAllInputs,C=void 0!==I&&I,b=n.maskTextFn,S=n.maskInputFn,w=n.slimDOM,k=void 0!==w&&w,A=n.dataURLOptions,M=n.preserveWhiteSpace,L=n.onSerialize,R=n.onIframeLoad,T=n.iframeLoadTimeout,N=n.onStylesheetLoad,F=n.stylesheetLoadTimeout,E=n.keepIframeSrcFn;return Dt(e,{doc:e,mirror:o,blockClass:a,blockSelector:c,maskTextClass:u,maskTextSelector:h,skipChild:!1,inlineStylesheet:p,maskInputOptions:!0===C?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===C?{password:!0}:C,maskTextFn:b,maskInputFn:S,slimDOMOptions:!0===k||"all"===k?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===k,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===k?{}:k,dataURLOptions:A,inlineImages:f,recordCanvas:y,preserveWhiteSpace:M,onSerialize:L,onIframeLoad:R,iframeLoadTimeout:T,onStylesheetLoad:N,stylesheetLoadTimeout:F,keepIframeSrcFn:void 0===E?function(){return!1}:E,newlyAddedElement:!1})}(document,{mirror:sr,blockClass:o,blockSelector:i,maskTextClass:s,maskTextSelector:c,inlineStylesheet:l,maskAllInputs:N,maskTextFn:p,slimDOM:F,dataURLOptions:y,recordCanvas:C,inlineImages:k,onSerialize:e=>{Qt(e,sr)&&G.addIframe(e),qt(e,sr)&&D.trackLinkElement(e),$t(e)&&B.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{G.attachIframe(e,t),B.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{D.attachLinkElement(e,t)},keepIframeSrcFn:M});if(!h)return console.warn("Failed to snapshot the document");rr(nr({type:tn.FullSnapshot,data:{node:h,initialOffset:{left:void 0!==window.pageXOffset?window.pageXOffset:(null===document||void 0===document?void 0:document.documentElement.scrollLeft)||(null===(n=null===(t=null===document||void 0===document?void 0:document.body)||void 0===t?void 0:t.parentElement)||void 0===n?void 0:n.scrollLeft)||(null===(r=null===document||void 0===document?void 0:document.body)||void 0===r?void 0:r.scrollLeft)||0,top:void 0!==window.pageYOffset?window.pageYOffset:(null===document||void 0===document?void 0:document.documentElement.scrollTop)||(null===(u=null===(a=null===document||void 0===document?void 0:document.body)||void 0===a?void 0:a.parentElement)||void 0===u?void 0:u.scrollTop)||(null===(d=null===document||void 0===document?void 0:document.body)||void 0===d?void 0:d.scrollTop)||0}}})),gn.forEach((e=>e.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&D.adoptStyleSheets(document.adoptedStyleSheets,sr.getId(document))};try{const e=[];e.push(Gt("DOMContentLoaded",(()=>{rr(nr({type:tn.DomContentLoaded,data:{}}))})));const t=e=>{var t;return Nn({mutationCb:W,mousemoveCb:(e,t)=>rr(nr({type:tn.IncrementalSnapshot,data:{source:t,positions:e}})),mouseInteractionCb:e=>rr(nr({type:tn.IncrementalSnapshot,data:Object.assign({source:nn.MouseInteraction},e)})),scrollCb:O,viewportResizeCb:e=>rr(nr({type:tn.IncrementalSnapshot,data:Object.assign({source:nn.ViewportResize},e)})),inputCb:e=>rr(nr({type:tn.IncrementalSnapshot,data:Object.assign({source:nn.Input},e)})),mediaInteractionCb:e=>rr(nr({type:tn.IncrementalSnapshot,data:Object.assign({source:nn.MediaInteraction},e)})),styleSheetRuleCb:e=>rr(nr({type:tn.IncrementalSnapshot,data:Object.assign({source:nn.StyleSheetRule},e)})),styleDeclarationCb:e=>rr(nr({type:tn.IncrementalSnapshot,data:Object.assign({source:nn.StyleDeclaration},e)})),canvasMutationCb:Z,fontCb:e=>rr(nr({type:tn.IncrementalSnapshot,data:Object.assign({source:nn.Font},e)})),selectionCb:e=>{rr(nr({type:tn.IncrementalSnapshot,data:Object.assign({source:nn.Selection},e)}))},blockClass:o,ignoreClass:a,maskTextClass:s,maskTextSelector:c,maskInputOptions:N,inlineStylesheet:l,sampling:v,recordCanvas:C,inlineImages:k,userTriggeredOnInput:S,collectFonts:w,doc:e,maskInputFn:m,maskTextFn:p,keepIframeSrcFn:M,blockSelector:i,slimDOMOptions:F,dataURLOptions:y,mirror:sr,iframeManager:G,stylesheetManager:D,shadowDomManager:B,canvasManager:ir,ignoreCSSAttributes:L,plugins:(null===(t=null==A?void 0:A.filter((e=>e.observer)))||void 0===t?void 0:t.map((e=>({observer:e.observer,options:e.options,callback:t=>rr(nr({type:tn.Plugin,data:{plugin:e.name,payload:t}}))}))))||[]},g)};G.addLoadListener((n=>{e.push(t(n.contentDocument))}));const n=()=>{or(),e.push(t(document)),ar=!0};return"interactive"===document.readyState||"complete"===document.readyState?n():e.push(Gt("load",(()=>{rr(nr({type:tn.Load,data:{}})),n()}),window)),()=>{e.forEach((e=>e())),ar=!1}}catch(e){console.warn(e)}}cr.addCustomEvent=(e,t)=>{if(!ar)throw new Error("please add custom event after start recording");rr(nr({type:tn.Custom,data:{tag:e,payload:t}}))},cr.freezePage=()=>{gn.forEach((e=>e.freeze()))},cr.takeFullSnapshot=e=>{if(!ar)throw new Error("please take full snapshot after start recording");or(e)},cr.mirror=sr;class lr{constructor(e){this.instance=e}init(){}run(){return t(this,void 0,void 0,(function*(){const e=this.instance;cr({emit(t){e.rrwebStack.push(t)}})}))}unload(){}}class ur{constructor(e){this.monitor=e}init(){}run(){this.monitor.trackPV=()=>{var e;const t=null!==(e=this.monitor.uid)&&void 0!==e?e:"unknown",n=new we(t);this.monitor.send(n)}}unload(){}}const dr=50,hr="https://bdul0j.laf.dev/logger";class mr extends se{trackJSError(e){console.info("如果要使用，请使用 PVPlugin 覆盖这个方法")}trackPV(){console.info("如果要使用，请使用 PVPlugin 覆盖这个方法")}constructor(e){super(e.appid,e.endpoint||hr,e.method,e.sample_rate),this.fingerprint="unknown",this.eventStack=[],this.rrwebStack=[];const{method:n,senderType:r,threshold:o=1,endpoint:i,longtask_time:a=dr}=e;this.longtask_time=a,function(){return t(this,void 0,void 0,(function*(){const e=re.load(),t=yield e;return(yield t.get()).visitorId}))}().then((e=>this.fingerprint=e)),this.initSender(r,n,i||hr,o),this.initPlugins(e.plugins)}send(e){var t;null!=e&&(Math.random()>this.sample_rate||null===(t=this.senderInstance)||void 0===t||t.post(e))}initSender(e,t,n,r){this.senderInstance="beacon"==e?new ie(n,this):new ae(n,this,t,r)}initPlugins(e=[new ke(this),new Ae(this),new Re(this),new Ne(this),new dt(this),new Te(this),new lr(this),new ur(this)]){this.plugins=e}start(){return t(this,void 0,void 0,(function*(){window.__SNIPER__=this,this.plugins.forEach((e=>e.init())),this.plugins.forEach((e=>e.run()))}))}setUid(e){this.uid=e}}window.WebMonitor=mr;export{mr as default};
